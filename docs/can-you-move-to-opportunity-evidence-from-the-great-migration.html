<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.2 Can you move to opportunity? Evidence from the great migration | bookdownproj.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="2.2 Can you move to opportunity? Evidence from the great migration | bookdownproj.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2 Can you move to opportunity? Evidence from the great migration | bookdownproj.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"/>
<link rel="next" href="regression-discontinuity-design.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/font-awesome-5.13.0/js/script.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">M2-Econometrics-Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to our replication textbook!</a></li>
<li class="chapter" data-level="1" data-path="randomized-control-trials.html"><a href="randomized-control-trials.html"><i class="fa fa-check"></i><b>1</b> Randomized Control Trials</a>
<ul>
<li class="chapter" data-level="1.1" data-path="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><a href="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><i class="fa fa-check"></i><b>1.1</b> Subsidies and the African Green Revolution: Direct effects and social network spillovers of randomized input subsidies in Mozambique</a>
<ul>
<li class="chapter" data-level="" data-path="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><a href="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html#highlights"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="1.1.1" data-path="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><a href="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html#background-elements"><i class="fa fa-check"></i><b>1.1.1</b> Background elements</a></li>
<li class="chapter" data-level="1.1.2" data-path="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><a href="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html#replication-of-table-2---regressions-with-spillover-effects"><i class="fa fa-check"></i><b>1.1.2</b> Replication of Table 2 - Regressions with spillover effects</a></li>
<li class="chapter" data-level="1.1.3" data-path="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><a href="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html#replication-of-figure-2---direct-and-spillover-impacts-of-subsidies"><i class="fa fa-check"></i><b>1.1.3</b> Replication of Figure 2 - Direct and Spillover Impacts of Subsidies</a></li>
<li class="chapter" data-level="1.1.4" data-path="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html"><a href="subsidies-and-the-african-green-revolution-direct-effects-and-social-network-spillovers-of-randomized-input-subsidies-in-mozambique.html#replication-of-table-7---separated-estimation-of-spillover-effects-for-the-first-and-second-years-after-the-program"><i class="fa fa-check"></i><b>1.1.4</b> Replication of Table 7 - Separated Estimation of Spillover Effects for the First and Second Years After the Program</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>2</b> Instrumental Variables</a>
<ul>
<li class="chapter" data-level="2.1" data-path="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"><a href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"><i class="fa fa-check"></i><b>2.1</b> Winners and losers from Agrarian Reform: Evidence from Danish land inequality 1682–1895</a>
<ul>
<li class="chapter" data-level="" data-path="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"><a href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html#highlights-1"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="2.1.1" data-path="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"><a href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html#introduction"><i class="fa fa-check"></i><b>2.1.1</b> Introduction</a></li>
<li class="chapter" data-level="2.1.2" data-path="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"><a href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html#identification-strategy"><i class="fa fa-check"></i><b>2.1.2</b> Identification strategy</a></li>
<li class="chapter" data-level="2.1.3" data-path="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html"><a href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html#from-the-article-to-practice-exploring-the-replication-code"><i class="fa fa-check"></i><b>2.1.3</b> From the article to practice: exploring the replication code</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><i class="fa fa-check"></i><b>2.2</b> Can you move to opportunity? Evidence from the great migration</a>
<ul>
<li class="chapter" data-level="" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#highlights-2"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="2.2.1" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#introduction-and-historical-background"><i class="fa fa-check"></i><b>2.2.1</b> Introduction and historical background</a></li>
<li class="chapter" data-level="2.2.2" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#data-on-upward-mobility-and-city-demographics"><i class="fa fa-check"></i><b>2.2.2</b> Data on upward mobility and city demographics</a></li>
<li class="chapter" data-level="2.2.3" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#initialization-and-organization-of-the-directories"><i class="fa fa-check"></i><b>2.2.3</b> Initialization and organization of the directories</a></li>
<li class="chapter" data-level="2.2.4" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#descriptive-statistics"><i class="fa fa-check"></i><b>2.2.4</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="2.2.5" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#identification-strategy-1"><i class="fa fa-check"></i><b>2.2.5</b> Identification strategy</a></li>
<li class="chapter" data-level="2.2.6" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#model-equations"><i class="fa fa-check"></i><b>2.2.6</b> Model Equations:</a></li>
<li class="chapter" data-level="2.2.7" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#results-on-upward-mobility"><i class="fa fa-check"></i><b>2.2.7</b> Results on upward mobility</a></li>
<li class="chapter" data-level="2.2.8" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#robustness-checks"><i class="fa fa-check"></i><b>2.2.8</b> Robustness checks</a></li>
<li class="chapter" data-level="2.2.9" data-path="can-you-move-to-opportunity-evidence-from-the-great-migration.html"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#contribution"><i class="fa fa-check"></i><b>2.2.9</b> Contribution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html"><i class="fa fa-check"></i><b>3</b> Regression Discontinuity Design</a>
<ul>
<li class="chapter" data-level="3.1" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html"><i class="fa fa-check"></i><b>3.1</b> The Persistent Effects of Peru’s Mining <em>Mita</em></a>
<ul>
<li class="chapter" data-level="" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#highlights-3"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="3.1.1" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#introduction-1"><i class="fa fa-check"></i><b>3.1.1</b> Introduction</a></li>
<li class="chapter" data-level="3.1.2" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#good-practices"><i class="fa fa-check"></i><b>3.1.2</b> Good Practices</a></li>
<li class="chapter" data-level="3.1.3" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#table-1---summary-statistics"><i class="fa fa-check"></i><b>3.1.3</b> Table 1 - Summary Statistics</a></li>
<li class="chapter" data-level="3.1.4" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#table-2---main-results"><i class="fa fa-check"></i><b>3.1.4</b> Table 2 - Main Results</a></li>
<li class="chapter" data-level="3.1.5" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#table-3---robustness-results"><i class="fa fa-check"></i><b>3.1.5</b> Table 3 - Robustness Results</a></li>
<li class="chapter" data-level="3.1.6" data-path="the-persistent-effects-of-perus-mining-mita.html"><a href="the-persistent-effects-of-perus-mining-mita.html#appendix-automatization-of-table-outputs"><i class="fa fa-check"></i><b>3.1.6</b> Appendix: Automatization of table outputs</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><i class="fa fa-check"></i><b>3.2</b> Political Fragmentation and Government Stability: Evidence from Local Governments in Spain</a>
<ul>
<li class="chapter" data-level="" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#highlights-4"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="3.2.1" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#introduction-2"><i class="fa fa-check"></i><b>3.2.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2.2" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#rdd-methodology-and-paper-summary"><i class="fa fa-check"></i><b>3.2.2</b> RDD Methodology and Paper Summary</a></li>
<li class="chapter" data-level="3.2.3" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#good-practices-before-starting"><i class="fa fa-check"></i><b>3.2.3</b> Good Practices Before Starting</a></li>
<li class="chapter" data-level="3.2.4" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>3.2.4</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="3.2.5" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#empirical-strategy"><i class="fa fa-check"></i><b>3.2.5</b> Empirical Strategy</a></li>
<li class="chapter" data-level="3.2.6" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#main-results"><i class="fa fa-check"></i><b>3.2.6</b> Main Results</a></li>
<li class="chapter" data-level="3.2.7" data-path="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html"><a href="political-fragmentation-and-government-stability-evidence-from-local-governments-in-spain.html#robustness-checks-1"><i class="fa fa-check"></i><b>3.2.7</b> Robustness Checks</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><i class="fa fa-check"></i><b>3.3</b> Does the Election of a Female Leader Clear the Way for More Women in Politics?”</a>
<ul>
<li class="chapter" data-level="" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#highlights-5"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="3.3.1" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#introduction-3"><i class="fa fa-check"></i><b>3.3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.3.2" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#identification-strategy-2"><i class="fa fa-check"></i><b>3.3.2</b> Identification Strategy</a></li>
<li class="chapter" data-level="3.3.3" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#good-practices-1"><i class="fa fa-check"></i><b>3.3.3</b> Good Practices</a></li>
<li class="chapter" data-level="3.3.4" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#summary-statistics"><i class="fa fa-check"></i><b>3.3.4</b> Summary Statistics</a></li>
<li class="chapter" data-level="3.3.5" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#main-results-1"><i class="fa fa-check"></i><b>3.3.5</b> Main Results</a></li>
<li class="chapter" data-level="3.3.6" data-path="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html"><a href="does-the-election-of-a-female-leader-clear-the-way-for-more-women-in-politics.html#robustness-check"><i class="fa fa-check"></i><b>3.3.6</b> Robustness Check</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="differences-in-discontinuity-design.html"><a href="differences-in-discontinuity-design.html"><i class="fa fa-check"></i><b>4</b> Differences in Discontinuity Design</a>
<ul>
<li class="chapter" data-level="4.1" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><i class="fa fa-check"></i><b>4.1</b> Equality of opportunity and human capital accumulation: Motivational effect of a nationwide scholarship in Colombia</a>
<ul>
<li class="chapter" data-level="" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#highlights-6"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="4.1.1" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#before-we-start"><i class="fa fa-check"></i><b>4.1.1</b> Before we start</a></li>
<li class="chapter" data-level="4.1.2" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#introduction-4"><i class="fa fa-check"></i><b>4.1.2</b> Introduction</a></li>
<li class="chapter" data-level="4.1.3" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#main-strategies-explanation-regression-discontinuity-design-and-quantile-regressions"><i class="fa fa-check"></i><b>4.1.3</b> Main strategies explanation: Regression Discontinuity Design and Quantile Regressions</a></li>
<li class="chapter" data-level="4.1.4" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#descriptive-statistics---replication-of-table-1-and-figure-4"><i class="fa fa-check"></i><b>4.1.4</b> Descriptive statistics - Replication of Table 1 and Figure 4</a></li>
<li class="chapter" data-level="4.1.5" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#main-results---replication-of-table-3"><i class="fa fa-check"></i><b>4.1.5</b> Main results - Replication of Table 3</a></li>
<li class="chapter" data-level="4.1.6" data-path="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html"><a href="equality-of-opportunity-and-human-capital-accumulation-motivational-effect-of-a-nationwide-scholarship-in-colombia.html#robustness-check---replication-of-figure-a2"><i class="fa fa-check"></i><b>4.1.6</b> Robustness check - Replication of Figure A2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="differences-in-differences.html"><a href="differences-in-differences.html"><i class="fa fa-check"></i><b>5</b> Differences-in-Differences</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><i class="fa fa-check"></i><b>5.1</b> The Long-Term Effects of Measles Vaccination on Earnings and Employment</a>
<ul>
<li class="chapter" data-level="" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#highlights-7"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="5.1.1" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#introduction-5"><i class="fa fa-check"></i><b>5.1.1</b> Introduction</a></li>
<li class="chapter" data-level="5.1.2" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#good-practices-before-starting-1"><i class="fa fa-check"></i><b>5.1.2</b> Good Practices Before Starting</a></li>
<li class="chapter" data-level="5.1.3" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#descriptive-statistics---event-study"><i class="fa fa-check"></i><b>5.1.3</b> Descriptive Statistics - Event Study</a></li>
<li class="chapter" data-level="5.1.4" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#main-results---twfe"><i class="fa fa-check"></i><b>5.1.4</b> Main Results - TWFE</a></li>
<li class="chapter" data-level="5.1.5" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#robustness-check---placebo-test"><i class="fa fa-check"></i><b>5.1.5</b> Robustness Check - Placebo Test</a></li>
<li class="chapter" data-level="5.1.6" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#conclusion"><i class="fa fa-check"></i><b>5.1.6</b> Conclusion</a></li>
<li class="chapter" data-level="5.1.7" data-path="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html"><a href="the-long-term-effects-of-measles-vaccination-on-earnings-and-employment.html#references"><i class="fa fa-check"></i><b>5.1.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html"><i class="fa fa-check"></i><b>5.2</b> Expected Returns to Crime and Crime Location</a>
<ul>
<li class="chapter" data-level="" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#highlights-8"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="5.2.1" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#introduction-and-motivation"><i class="fa fa-check"></i><b>5.2.1</b> Introduction and Motivation</a></li>
<li class="chapter" data-level="5.2.2" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#data-1"><i class="fa fa-check"></i><b>5.2.2</b> Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#good-practices-before-starting-2"><i class="fa fa-check"></i><b>5.2.3</b> Good practices before starting</a></li>
<li class="chapter" data-level="5.2.4" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#descriptive-statistics-2"><i class="fa fa-check"></i><b>5.2.4</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="5.2.5" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#main-strategies-explanation-difference-in-differences"><i class="fa fa-check"></i><b>5.2.5</b> Main strategies explanation: Difference-in-Differences</a></li>
<li class="chapter" data-level="5.2.6" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#main-results-2"><i class="fa fa-check"></i><b>5.2.6</b> Main Results</a></li>
<li class="chapter" data-level="5.2.7" data-path="expected-returns-to-crime-and-crime-location.html"><a href="expected-returns-to-crime-and-crime-location.html#robustness-checks-2"><i class="fa fa-check"></i><b>5.2.7</b> Robustness Checks</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><i class="fa fa-check"></i><b>5.3</b> The Effects of a Large-Scale Mental Health Reform: Evidence from Brazil</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#highlights-9"><i class="fa fa-check"></i><b>5.3.1</b> Highlights</a></li>
<li class="chapter" data-level="5.3.2" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#introduction-6"><i class="fa fa-check"></i><b>5.3.2</b> Introduction</a></li>
<li class="chapter" data-level="5.3.3" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#good-practices-2"><i class="fa fa-check"></i><b>5.3.3</b> Good practices</a></li>
<li class="chapter" data-level="5.3.4" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#descriptive-statistics-3"><i class="fa fa-check"></i><b>5.3.4</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="5.3.5" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#empirical-strategy-formalization-of-strategy-and-defining-estimator"><i class="fa fa-check"></i><b>5.3.5</b> Empirical strategy: formalization of strategy and defining estimator</a></li>
<li class="chapter" data-level="5.3.6" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#main-results-3"><i class="fa fa-check"></i><b>5.3.6</b> Main results</a></li>
<li class="chapter" data-level="5.3.7" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#code-replication"><i class="fa fa-check"></i><b>5.3.7</b> Code replication</a></li>
<li class="chapter" data-level="5.3.8" data-path="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html"><a href="the-effects-of-a-large-scale-mental-health-reform-evidence-from-brazil.html#robustness-check-1"><i class="fa fa-check"></i><b>5.3.8</b> Robustness Check</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="synthetic-control-method.html"><a href="synthetic-control-method.html"><i class="fa fa-check"></i><b>6</b> Synthetic Control Method</a>
<ul>
<li class="chapter" data-level="6.1" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><i class="fa fa-check"></i><b>6.1</b> Effects of Copyrights on Science: Evidence from the WWII Book Republication Program</a>
<ul>
<li class="chapter" data-level="" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#highlights-10"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="6.1.1" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#getting-started"><i class="fa fa-check"></i><b>6.1.1</b> Getting Started</a></li>
<li class="chapter" data-level="6.1.2" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#background-elements-1"><i class="fa fa-check"></i><b>6.1.2</b> Background elements:</a></li>
<li class="chapter" data-level="6.1.3" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#main-strategies-explanation-difference-in-differences-and-synthetic-control-method"><i class="fa fa-check"></i><b>6.1.3</b> Main strategies explanation: Difference-in-Differences and Synthetic Control Method</a></li>
<li class="chapter" data-level="6.1.4" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#figure-1-citations-to-brp-books-from-new-work-in-english-versus-other-languages"><i class="fa fa-check"></i><b>6.1.4</b> Figure 1 : Citations to BRP Books from New Work in English versus Other Languages</a></li>
<li class="chapter" data-level="6.1.5" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#table-2-ols-effect-of-brp-on-english-language-citations-brp-versus-swiss-books-matched-sample"><i class="fa fa-check"></i><b>6.1.5</b> Table 2: OLS, Effect of BRP on English-Language Citations: BRP versus Swiss Books (Matched Sample)</a></li>
<li class="chapter" data-level="6.1.6" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#table-3-ols-effect-of-brp-on-english-language-versus-other-citations-brp-versus-swiss-books-matched-sample"><i class="fa fa-check"></i><b>6.1.6</b> Table 3 : OLS, Effect of BRP on English-Language versus Other Citations: BRP versus Swiss Books (Matched Sample)</a></li>
<li class="chapter" data-level="6.1.7" data-path="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html"><a href="effects-of-copyrights-on-science-evidence-from-the-wwii-book-republication-program.html#robustness-checks-the-synthetic-control-method"><i class="fa fa-check"></i><b>6.1.7</b> Robustness checks: The Synthetic control Method</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><i class="fa fa-check"></i><b>6.2</b> Carbon Taxes and CO2 Emissions: Sweden as a Case Study</a>
<ul>
<li class="chapter" data-level="" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html#highlights-11"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="6.2.1" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html#introduction-7"><i class="fa fa-check"></i><b>6.2.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2.2" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html#identification-strategy-3"><i class="fa fa-check"></i><b>6.2.2</b> Identification strategy</a></li>
<li class="chapter" data-level="6.2.3" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html#from-the-article-to-practice-exploring-the-replication-code-1"><i class="fa fa-check"></i><b>6.2.3</b> From the article to practice: exploring the replication code</a></li>
<li class="chapter" data-level="6.2.4" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html#descriptive-statistics-figure-3-and-figures-11-12"><i class="fa fa-check"></i><b>6.2.4</b> Descriptive Statistics : Figure 3 and Figures 11-12</a></li>
<li class="chapter" data-level="6.2.5" data-path="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html"><a href="carbon-taxes-and-co2-emissions-sweden-as-a-case-study.html#main-results-table-3-and-figure-14"><i class="fa fa-check"></i><b>6.2.5</b> Main Results: Table 3 and Figure 14</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><i class="fa fa-check"></i><b>6.3</b> Rebel on the Canal: Disrupted Trade Access and Social Conflict in China, 1650-1911</a>
<ul>
<li class="chapter" data-level="" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html#highlights-12"><i class="fa fa-check"></i>Highlights</a></li>
<li class="chapter" data-level="6.3.1" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html#background"><i class="fa fa-check"></i><b>6.3.1</b> Background</a></li>
<li class="chapter" data-level="6.3.2" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html#empirical-approach-and-descriptive-statistics"><i class="fa fa-check"></i><b>6.3.2</b> Empirical Approach and Descriptive Statistics</a></li>
<li class="chapter" data-level="6.3.3" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html#main-results-4"><i class="fa fa-check"></i><b>6.3.3</b> Main Results</a></li>
<li class="chapter" data-level="6.3.4" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html#robustness-checks-3"><i class="fa fa-check"></i><b>6.3.4</b> Robustness Checks</a></li>
<li class="chapter" data-level="6.3.5" data-path="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html"><a href="rebel-on-the-canal-disrupted-trade-access-and-social-conflict-in-china-1650-1911.html#discussion-and-interpretation"><i class="fa fa-check"></i><b>6.3.5</b> Discussion and Interpretation</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="can-you-move-to-opportunity-evidence-from-the-great-migration" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Can you move to opportunity? Evidence from the great migration<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#can-you-move-to-opportunity-evidence-from-the-great-migration" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Derenoncourt, Ellora. Can you move to opportunity? Evidence from the Great Migration. <em>American Economic Review</em> 112.2 (2022): 369-408. <a href="https://www.aeaweb.org/articles?id=10.1257/aer.20200002" target="_blank">https://www.aeaweb.org/articles?id=10.1257/aer.20200002</a></p>
<p><a href="resources/Resources_ED/DoFile_ED.do">Download the do-file corresponding to the explanations from here</a></p>
<p><a href="resources/Resources_ED/Codebook_ED.pdf">Download the Codebook</a></p>
<!-- [Download the final dataset from here](https://drive.google.com/file/d/1o-zdarmiF3-qVvtylLJ9NuhxP5A0mw8G/view?usp=drive_link) -->
<div id="highlights-2" class="section level3 unnumbered hasAnchor">
<h3>Highlights<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#highlights-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>This paper examines the impact of racial composition shocks during the Great Migration (1940-1970) on the upward mobility of Black families in northern U.S. cities, exploring the mechanisms through which these demographic changes influenced the long-term socio-economic outcomes.</p></li>
<li><p>The research uses a <strong>shift-share IV strategy</strong>, leveraging historical migration patterns and southern economic shocks.</p></li>
<li><p>In this context, it effectively isolates exogenous variation in the Black population influx to northern cities, addressing endogeneity concerns and identifying causality, validated through pre-trend checks and robust instrument strength.</p></li>
<li><p>This methodology is standard as it builds off the identification strategy developed by <code>Boustan (2010)</code> and has been used in subsequent papers on the Great Migration, such as <code>Tabellini (2018)</code> and <code>Fouka, Mazumder, &amp; Tabellini (2022)</code>, making it a recognized approach in the field of migration studies.</p></li>
<li><p>Firstly, the document begins by presenting a concise summary of the paper, ensuring readers have a solid understanding of its key themes and objectives. Then, a step-by-step replication of the paper’s important elements is provided, offering insights into the methodology and the validity of its findings.</p></li>
<li><p>The final section highlights the key STATA techniques broken down in this document, including dynamic file management, string matching, macros, nested loops, IV regressions, and seamless LaTeX export, all contributing to enhancing the accessibility of the article and its code.</p></li>
</ul>
</div>
<div id="introduction-and-historical-background" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Introduction and historical background<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#introduction-and-historical-background" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Great Migration, a pivotal demographic shift in U.S. history, involved millions of Black Americans moving from the South to the North of the country between 1910 and 1970. This exodus, driven by the quest for freedom and better opportunities, occurred in two waves: the first from 1915 to 1930 and the second from 1940 to 1970, which is the period this paper focuses on. The second wave was largely fueled by an increased labor demand for war-production and defense industries during WWII, as well as in the automotive sector in subsequent decades. At the same time, important changes in the southern economy, including mechanization in agriculture combined with the ongoing political, social and economic repression of the black families under Jim Crow laws, further drove this out-migration from the south.</p>
<p>For decades, the North seemed to fulfill these aspirations, offering greater access to education and better living conditions. However, the Migration’s legacy has seemed to be complex. By the 2000s, many northern regions that once fostered upward mobility for Black families now exhibit some of the poorest outcomes. This historical shift in the geography of opportunity highlights the nuanced impacts of the Great Migration, making it a critical subject for understanding racial inequality and economic mobility in the United States.</p>
</div>
<div id="data-on-upward-mobility-and-city-demographics" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Data on upward mobility and city demographics<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#data-on-upward-mobility-and-city-demographics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The author utilized historical U.S. census data from the IPUMS 1940 Complete Count Census (“CC”), which includes detailed information on educational outcomes for teenagers and their parents within the same household, as well as data on location, race, and other demographics. This was combined with a dataset on localized upward mobility developed by <code>Chetty et al. (2018)</code> and <code>Chetty and Hendren (2018b)</code>. The latter dataset, derived from U.S. federal tax records, provides information on parental income and the adult income of their children, with parents and children linked through dependent claims on tax forms. These data sources offer measures of upward mobility for the 1980s birth cohorts—the most recent cohorts for which adult outcomes can be reliably assessed. Additionally, the datasets were internally linked to census data to incorporate racial information, which is not captured in tax records.</p>
<p>As mentioned earlier, the study focuses on understanding upward mobility, defined broadly as the adult outcomes of children relative to their parents’ economic status. Prior to the 1950s, the analysis centers on educational upward mobility, using measures such as the proportion of teenagers in a commuting zone with nine or more years of schooling, whose parents had between five and eight years of education. This approach leverages prior research to examine geographic and racial disparities in mobility during this period.</p>
<p>For earlier periods, when detailed educational data were unavailable, school attendance among teenagers from low socioeconomic families is used as a proxy. In contrast, upward mobility in the 2000s is assessed using income data, specifically the average income rank of individuals based on their parents’ income rank within their birth cohort. These rankings are calculated nationally, offering a broader perspective on economic mobility.</p>
<p>Although educational upward mobility (historical periods) and income upward mobility (contemporary periods) are distinct measures that had been used due to data constraints, the study demonstrates a strong correlation between the two. This suggests that the geography of educational mobility in the 1940s provides meaningful insights into patterns of income mobility today.</p>
<p>In addition, the study concentrates on 130 urban commuting zones in the non-southern United States (referred to in the paper as “North” for simplicity), selected based on demographic changes during the Great Migration and net Black migration into the regions. These zones include cities with populations of 25,000 or more and states in the Northeast, Midwest, West, and a few southern locations like Maryland, Delaware, and Washington, D.C. The sample covers a significant portion of the population, including 85% of the non-southern U.S. population and 97% of its Black population, ensuring comprehensive representation for the analysis.</p>
</div>
<div id="initialization-and-organization-of-the-directories" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Initialization and organization of the directories<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#initialization-and-organization-of-the-directories" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All the data used for the creation of the final dataset are publicly accessible. For utilizing the <strong>ICPSR</strong> and <strong>IPUMS USA</strong> data, users should sign-up to their website, download the data from the DOI and unzip and store them and then follow the instruction of the related do files in the original replication package to create the final dataset.</p>
<p>Then, we install the essential packages (<code>ssc install</code>) and increase the maximum number of variables (<code>set maxvar</code>) that Stata can handle since our final dataset has more than the usual default number of variables Stata accepts.</p>
<p>After compiling the final dataset, to store our directories and main variables that will be used throughout the do-file, we use macros. Macros in Stata are placeholders that store text, numbers, or code to avoid repetition. Local macros store temporary information that can’t be accessed again outside of that specific block of code, while global macros can be used over again throughout the entirety of the do-file. Here, we create global macros for our directories, as well as OLS, IV, and baseline controls variables to avoid writing them everytime. This allows us to be efficient.</p>
<div class="sourceCode" id="cb34" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb34-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-1" tabindex="-1"></a>* Clear <span class="ot">all</span> and <span class="kw">set</span> <span class="fu">max</span> <span class="dv">matsize</span></span>
<span id="cb34-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-2" tabindex="-1"></a></span>
<span id="cb34-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-3" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb34-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-4" tabindex="-1"></a><span class="kw">clear</span> <span class="ot">all</span></span>
<span id="cb34-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-5" tabindex="-1"></a><span class="kw">set</span> <span class="kw">more</span> <span class="kw">off</span></span>
<span id="cb34-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-6" tabindex="-1"></a></span>
<span id="cb34-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-7" tabindex="-1"></a><span class="kw">set</span> <span class="dv">maxvar</span> 9000 </span>
<span id="cb34-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-8" tabindex="-1"></a></span>
<span id="cb34-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-9" tabindex="-1"></a></span>
<span id="cb34-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-10" tabindex="-1"></a></span>
<span id="cb34-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-11" tabindex="-1"></a>*installing necessary packages</span>
<span id="cb34-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-12" tabindex="-1"></a>*estout stores <span class="kw">estimates</span> and allows us to make regression tables</span>
<span id="cb34-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-13" tabindex="-1"></a></span>
<span id="cb34-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-14" tabindex="-1"></a><span class="kw">ssc</span> install estout, <span class="kw">replace</span></span>
<span id="cb34-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-15" tabindex="-1"></a></span>
<span id="cb34-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-16" tabindex="-1"></a>* binscatter allows us to visualize grouped <span class="kw">data</span> trends</span>
<span id="cb34-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-17" tabindex="-1"></a><span class="kw">ssc</span> install binscatter, <span class="kw">replace</span></span>
<span id="cb34-18"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-18" tabindex="-1"></a></span>
<span id="cb34-19"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-19" tabindex="-1"></a>*ivreg2 allows us to <span class="kw">run</span> instrumental variables regressions</span>
<span id="cb34-20"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-20" tabindex="-1"></a><span class="kw">ssc</span> install ivreg2, <span class="kw">replace</span></span>
<span id="cb34-21"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-21" tabindex="-1"></a></span>
<span id="cb34-22"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-22" tabindex="-1"></a>* Setting up directories</span>
<span id="cb34-23"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-23" tabindex="-1"></a></span>
<span id="cb34-24"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-24" tabindex="-1"></a><span class="kw">global</span> XX <span class="st">&quot;YOUR DIRECTORY GOES HERE&quot;</span></span>
<span id="cb34-25"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-25" tabindex="-1"></a><span class="kw">global</span> <span class="kw">data</span> <span class="st">&quot;$XX/directory of the data folder&quot;</span></span>
<span id="cb34-26"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-26" tabindex="-1"></a><span class="kw">global</span> logs <span class="st">&quot;$XX/directory of the logs folder&quot;</span></span>
<span id="cb34-27"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-27" tabindex="-1"></a><span class="kw">global</span> figtab <span class="st">&quot;$XX/directory of the figures and tables folder&quot;</span></span>
<span id="cb34-28"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-28" tabindex="-1"></a></span>
<span id="cb34-29"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-29" tabindex="-1"></a><span class="kw">global</span> x_ols GM</span>
<span id="cb34-30"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-30" tabindex="-1"></a><span class="kw">global</span> x_iv GM_hat2 </span>
<span id="cb34-31"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-31" tabindex="-1"></a><span class="kw">global</span> baseline_controls frac_all_upm1940 mfg_lfshare1940  v2_blackmig3539_share1940 reg2 <span class="kw">reg3</span> reg4</span>
<span id="cb34-32"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb34-32" tabindex="-1"></a></span></code></pre></div>
<p>Then, we define a program (a user-defined set of instructions and commands) named <code>Printest</code> to automate repetative tasks (e.g, exporting coefficients and results) and ensure consistency when saving outputs and make it easier to import results into <strong>LaTeX</strong> or <strong>Word</strong> for documentation. This customized command does 4 things:</p>
<p><strong>1.</strong> takes the estimate (e.g., median or mean values)
<strong>2.</strong> formats it with specific text (e.g., units like “percentage points”).
<strong>3.</strong> rounds the estimate to a specified number of decimal places.
<strong>4.</strong> writes the formatted result to a text file in the designated directory for documentation.</p>
<p>Even when we’re producing a figure, using this command, we get to store the estimates in a <code>txt</code> file under a standardized format. Let’s go through the functions of this command: <code>args</code> specifies the inputs (arguments) of the program. <code>cap</code> (i.e. capture) prevents Stata from stopping or displaying an error if the next line of code fails. Here, it ensures that if the program <code>PrintEst</code> already exists, it is quietly deleted so we can redefine it. <code>mkdir</code> (make directory) creates a directory even if it doesn’t exist, <code>tempname</code> creates a temporary reference to the name of the file, <code>file write</code> adds the text that you want to write to the file, and <code>file close</code> closes the file.</p>
<p>The program starts by specifying the argument, displays the desired estimate, displays the name of the estimate, creates a temporary file name, creates the directory where that file will be saved, opens the file, formats the estimate to a specified number of decimals, and writes the desired output before closing the file.</p>
<p>The format of our output using this program can be seen in the first line: <code>args est name txtb4 txtaftr decim</code>. <code>est</code> is the estimate, <code>name</code> is the name of the output file, <code>txtb4</code> is any text we want to insert before the estimate, <code>txtaftr</code> is any text or notes we want to insert after the estimate, and <code>decim</code> is the number of decimals we want to see after the comma.</p>
<p>For example, in Figure 2 that we will see below, we can read:</p>
<p><code>local slc_pctbpopchng4070 = `r(mean)'</code></p>
<p><code>PrintEst `slc_pctbpopchng4070' "slc_pctbpopchng4070" "" "th percentile%" "2.0"</code></p>
<p>First line computes the mean of the variable local <code>slc_pctbpopchng4070</code>, and the second uses <code>PrintEst</code> to save that mean to a file named <code>slc_pctbpopchng4070.txt</code> and formats the output as [value]th percentile% at 2 decimals after the comma. If the mean is, for instance, 45, we will read in the text file: 45.00th percentile%. This provides a standardized way to document estimates throughout this do-file.</p>
<div class="sourceCode" id="cb35" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb35-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-1" tabindex="-1"></a></span>
<span id="cb35-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-2" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> PrintEst</span>
<span id="cb35-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-3" tabindex="-1"></a><span class="kw">program</span> PrintEst</span>
<span id="cb35-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-4" tabindex="-1"></a>    <span class="kw">args</span> <span class="kw">est</span> <span class="bn">name</span> txtb4 txtaftr decim</span>
<span id="cb35-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-5" tabindex="-1"></a>    <span class="kw">di</span> <span class="ot">`est&#39;</span></span>
<span id="cb35-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-6" tabindex="-1"></a>    <span class="kw">di</span> <span class="st">&quot;`name&#39;&quot;</span></span>
<span id="cb35-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-7" tabindex="-1"></a>    <span class="kw">tempname</span> <span class="kw">sample</span> </span>
<span id="cb35-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-8" tabindex="-1"></a>    cap <span class="kw">mkdir</span> <span class="ot">$figtab</span>/<span class="bn">text</span></span>
<span id="cb35-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-9" tabindex="-1"></a>    file open <span class="ot">`sample&#39;</span> <span class="kw">using</span>  <span class="st">&quot;$figtab/text/`name&#39;.txt&quot;</span>, <span class="bn">text</span> write <span class="kw">replace</span></span>
<span id="cb35-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-10" tabindex="-1"></a>    *<span class="kw">local</span> est_rounded = <span class="fu">round</span>(<span class="ot">`est&#39;</span>, 0<span class="ot">`decim&#39;</span>)</span>
<span id="cb35-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-11" tabindex="-1"></a>    <span class="kw">local</span> est_rounded : <span class="kw">di</span> %<span class="ot">`decim&#39;</span>f <span class="ot">`est&#39;</span></span>
<span id="cb35-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-12" tabindex="-1"></a>    file write <span class="ot">`sample&#39;</span>  <span class="st">`&quot;</span><span class="ot">`txtb4&#39;`est_rounded&#39;`txtaftr&#39;</span><span class="st">&quot;&#39;</span></span>
<span id="cb35-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-13" tabindex="-1"></a><span class="st">    file close `sample&#39;</span></span>
<span id="cb35-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb35-14" tabindex="-1"></a><span class="st">end</span></span></code></pre></div>
</div>
<div id="descriptive-statistics" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Descriptive Statistics<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#descriptive-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="figure-2-quantiles-of-urban-black-share-increases-1940-1970" class="section level4 hasAnchor" number="2.2.4.1">
<h4><span class="header-section-number">2.2.4.1</span> Figure 2: Quantiles of urban black share increases, 1940-1970<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#figure-2-quantiles-of-urban-black-share-increases-1940-1970" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Running descriptive statistics is essential. Good descriptive statistics further highlights the main points the paper attempts to drive. As such, we recreate Figure 2, which provides a comprehensive summary of urban Black population increases in Northern US cities during the Great Migration (<code>bpopchange1940_1970</code>) . The figure allows for both city-specific insights and a broader view of population trends across all commuting zones. The statistical calculations for key cities help contextualize the findings, making this graphic essential for understanding regional variations in population changes and migration patterns during the great migration in the United States.</p>
<p>Before breaking down the code, let’s start with understanding some repeated commands in this section and throughout the paper:</p>
<ul>
<li><p>Locals save estimates. When we read local <code>GM_`y'</code> <code>= _b[$x_ols]</code>, the line is saving the OLS (<code>$x_ols</code>) coefficient (<code>_b</code>) of GM when the outcome variable is `<code>y’</code>. Similarly, when we read <code>qui sum GM, local ols_SD = ``r(sd)'</code> , the lines quietly summarize <code>GM</code> and extract its standard deviation saved into a local named <code>ols_SD</code>.</p></li>
<li><p><code>regexm</code> helps us find whether an expression is present in a string variable (a variable that contains text). If that variable contains the expression we’re looking for, regexm will return 1 (true) if it is found, and 0 (false) if it is not. For example, say we have a string variable <code>address</code> with the following entries <code>123 Detroit St.</code>, <code>456 San Francisco Ave.</code>, and <code>101 Washington Blvd.</code>. the code <code>gen has_detroit = regexm(address, "Detroit”)</code> will create a new dummy variable called <code>has_detroit</code> that will be equal to 1 if Detroit is present in the addresses or 0 if not. In this case we’ll have 1, 0, 0.</p></li>
<li><p>This condition <code>|</code> means either. If we have <code>gen x = 1 if x1 = 2 | x2 = 3</code>, this means that the new variable x = 1 if x1 = 2 or if x2 = 3. In both cases, we record x as 1.</p></li>
<li><p>The <code>xtile</code> command in Stata is used to create a new variable by dividing an existing variable into quantiles. It gives us the option to choose how many quantiles we’d like to split the variable. For instance, <code>xtile pctX = X, nq(4)</code> generates a new variable, <code>pctX</code>, that assigns each observation a percentile rank (from 1 to 4) based on the values X.</p></li>
</ul>
<p>The first step loads the dataset, which contains the data for urban Black population increases from 1940 to 1970 across commuting zones (CZs). The <code>clear</code> option ensures any previously loaded data is removed before loading the new dataset. Next, a new variable <code>mylabel</code> is created to label specific cities of interest.</p>
<p>First, the <code>regexm</code> function identifies cities such as <strong>Steubenville</strong>, <strong>Milwaukee</strong>, <strong>Washington</strong>, <strong>Gary</strong>, and <strong>Detroit</strong>. <code>my label</code> will return <code>cz_name</code> + an empty string of custom labels that is then specified in the following lines of code. For instance, ,if <code>cz_name</code> contains any of the specified cities, the entry of <code>mylabel</code> for that row will be <code>cz_name +</code>.</p>
<p>Then, we apply <code>replace mylabel</code> by the label we actually want for that city <code>if regexm(cz_name, “X”)</code> i.e. if regexm found the city’s name in the <code>cz_name</code> string variable. This allows for highlighting key cities that are discussed in the paper.</p>
<div class="sourceCode" id="cb36" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb36-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-1" tabindex="-1"></a></span>
<span id="cb36-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-2" tabindex="-1"></a>    <span class="kw">use</span> <span class="ot">${data}</span>/GM_cz_final_dataset.dta, <span class="kw">clear</span></span>
<span id="cb36-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-3" tabindex="-1"></a>    <span class="kw">gen</span> mylabel=cz_name+<span class="st">&quot;                  &quot;</span> <span class="kw">if</span> <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Steubenville&quot;</span>) | <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Milwaukee&quot;</span>) <span class="co">///</span></span>
<span id="cb36-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-4" tabindex="-1"></a>    | <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Washington&quot;</span>) | <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Gary&quot;</span>) | <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Detroit&quot;</span>) </span>
<span id="cb36-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-5" tabindex="-1"></a>    <span class="kw">replace</span> mylabel=<span class="st">&quot;Washington, D.C.&quot;</span> <span class="kw">if</span> <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Washington&quot;</span>)</span>
<span id="cb36-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-6" tabindex="-1"></a>    <span class="kw">replace</span> mylabel=<span class="st">&quot;Detroit, MI&quot;</span> <span class="kw">if</span> <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Detroit&quot;</span>)</span>
<span id="cb36-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-7" tabindex="-1"></a>    <span class="kw">replace</span> mylabel=<span class="st">&quot;Gary, IN&quot;</span> <span class="kw">if</span> <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Gary&quot;</span>)</span>
<span id="cb36-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-8" tabindex="-1"></a>    <span class="kw">replace</span> mylabel=<span class="st">&quot;Steubenville, OH&quot;</span> <span class="kw">if</span> <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Steubenville&quot;</span>)</span>
<span id="cb36-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-9" tabindex="-1"></a>    <span class="kw">replace</span> mylabel=<span class="st">&quot;Milwaukee, WI&quot;</span> <span class="kw">if</span> <span class="fu">regexm</span>(cz_name, <span class="st">&quot;Milwaukee&quot;</span>)</span>
<span id="cb36-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb36-10" tabindex="-1"></a></span></code></pre></div>
<p>In this part of the code, the two-part scatter plot is generated using <code>twoway graph</code> which allows multiple types of plots in one figure. In this case, it’s used for two combined scatterplots. The first scatter plot visualizes the relationship between the urban Black population change (<code>bpopchange1940_1970</code>) on the Y-axis and our main independent variable, the percentile of urban Black population increase (<code>GM</code>) on the X-axis, highlighting cities of interest with labels (<code>if mylabel =! “”</code>, where <code>!</code> means not equal and <code>“”</code> means empty, so when <code>mylabel</code> is not missing, which is only true for the cities we specified earlier).</p>
<p>As for formatting options, graph formatting options in Stata allow you to customize the appearance of graphs by adjusting elements such as marker size, symbol type, label placement, and color. The points for these cities are marked with large (<code>msize(ylarge)</code>, orange (<code>jmporange</code>), hollow circles <code>msymbol(circle_hollow)</code> and labeled accordingly <code>mlabel(mylabel)</code>, making the cities easily identifiable. The color of the labels is black <code>mlabcolor(black)</code> and positioned above to the right <code>mlabposition(11)</code>. Legends usually are added automatically when generating a graph. Here, we remove legends using <code>legend(off)</code>. Finally, both the background and plotting area colors are set at white <code>graphregion(color(white))</code> &amp; <code>plotregion(ilcolor(white))</code>. For further guidance on visual formatting in STATA, refer to <strong>A Visual Guide to STATA Graphics</strong> by <strong>Michael M. Mitchell</strong>.</p>
<p>The second scatter plot displays the same data but includes all cities. As such, it offers a view of the population changes across the entire sample, drawn in green instead of orange. The plot is customized with titles on both axes, describing the population increase on the y-axis and the percentile of increase on the x-axis. We add a graph title using <code>ytitle</code>. The motivation behind this dual approach is to present both detailed, city-specific information and a general overview of the data.</p>
<div class="sourceCode" id="cb37" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb37-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb37-1" tabindex="-1"></a></span>
<span id="cb37-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb37-2" tabindex="-1"></a>    <span class="kw">graph</span> <span class="kw">twoway</span> (<span class="kw">scatter</span> bpopchange1940_1970 GM <span class="kw">if</span> mylabel!=<span class="st">&quot;&quot;</span>, <span class="bn">legend</span>(<span class="kw">off</span>) mcolor(<span class="bn">orange</span>) <span class="bn">msymbol</span>(<span class="bn">circle_hollow</span>) <span class="co">///</span></span>
<span id="cb37-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb37-3" tabindex="-1"></a>    msize(vlarge) <span class="bn">mlabel</span>(mylabel) <span class="bn">mlabcolor</span>(<span class="bn">black</span>) <span class="bn">mlabposition</span>(11) graphregion(<span class="kw">color</span>(<span class="bn">white</span>)) <span class="bn">plotregion</span>(ilcolor(<span class="bn">white</span>)) <span class="co">///</span></span>
<span id="cb37-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb37-4" tabindex="-1"></a>    <span class="kw">ylabel</span>(,<span class="bn">nogrid</span>))  || (<span class="kw">scatter</span> bpopchange1940_1970 GM, <span class="bn">xtitle</span>(<span class="st">&quot;Percentile of urban Black pop increase 40-70&quot;</span>) <span class="co">///</span></span>
<span id="cb37-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb37-5" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">&quot;Incr. in urban Black pop &#39;40-70 as ppt of 1940 urban pop&quot;</span>) <span class="bn">legend</span>(<span class="kw">off</span>) mcolor(<span class="kw">green</span>) graphregion(<span class="kw">color</span>(<span class="bn">white</span>)) <span class="bn">plotregion</span>(ilcolor(<span class="bn">white</span>))) </span></code></pre></div>
<p>After generating the graph, the output is saved as a <strong>PNG file</strong> in the specified directory (<code>$figtab</code>). <code>Cd “$figtable”</code> specifies the directory where the table will be saved. The code then calculates summary statistics for the <code>bpopchange1940_1970</code> variable, such as the median and mean. We also generate <code>pctbpopchange1940_1970</code>, which is a percentile rank of the existing variable <code>bpopchange1940_1970</code> divided into 100 quartiles. For each selected city (e.g., Pittsburgh, Detroit, Salt Lake City, Washington, DC), the <code>summ</code> command computes the mean for both the raw population change (<code>bpopchange1940_1970</code>) and its percentile distribution (<code>pctbpopchange1940_1970</code>). These statistics are stored in local variables and printed using the <code>PrintEst</code> command for clarity.</p>
<div class="sourceCode" id="cb38" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb38-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-1" tabindex="-1"></a></span>
<span id="cb38-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-3" tabindex="-1"></a>        cd <span class="st">&quot;$figtab&quot;</span></span>
<span id="cb38-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-4" tabindex="-1"></a>    <span class="kw">graph</span> <span class="kw">export</span> bpopchange_percentiles.png, <span class="kw">replace</span></span>
<span id="cb38-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-5" tabindex="-1"></a>    </span>
<span id="cb38-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-6" tabindex="-1"></a>    * Point <span class="kw">estimates</span> cited <span class="kw">in</span> <span class="bn">text</span>:</span>
<span id="cb38-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-7" tabindex="-1"></a>    </span>
<span id="cb38-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-8" tabindex="-1"></a>        * <span class="kw">median</span></span>
<span id="cb38-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-9" tabindex="-1"></a>        summ bpopchange1940_1970, <span class="kw">d</span></span>
<span id="cb38-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-10" tabindex="-1"></a>        <span class="kw">local</span> p50_bpopchng4070 = <span class="ot">`r(p50)&#39;</span></span>
<span id="cb38-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-11" tabindex="-1"></a>        PrintEst <span class="ot">`p50_bpopchng4070&#39;</span> <span class="st">&quot;p50_bpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentage points%&quot;</span> <span class="st">&quot;3.1&quot;</span></span>
<span id="cb38-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-12" tabindex="-1"></a>    </span>
<span id="cb38-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-13" tabindex="-1"></a>        <span class="kw">xtile</span> pctbpopchange1940_1970 = bpopchange1940_1970, nq(100)</span>
<span id="cb38-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-14" tabindex="-1"></a>        </span>
<span id="cb38-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-15" tabindex="-1"></a>        *Pittsburgh</span>
<span id="cb38-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-16" tabindex="-1"></a>        summ bpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Pittsburgh, PA&quot;</span></span>
<span id="cb38-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-17" tabindex="-1"></a>        <span class="kw">local</span> pitt_bpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-18"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-18" tabindex="-1"></a>        PrintEst <span class="ot">`pitt_bpopchng4070&#39;</span> <span class="st">&quot;pitt_bpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentage points%&quot;</span> <span class="st">&quot;3.1&quot;</span></span>
<span id="cb38-19"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-19" tabindex="-1"></a></span>
<span id="cb38-20"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-20" tabindex="-1"></a>        summ pctbpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Pittsburgh, PA&quot;</span></span>
<span id="cb38-21"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-21" tabindex="-1"></a>        <span class="kw">local</span> pitt_pctbpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-22"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-22" tabindex="-1"></a>        PrintEst <span class="ot">`pitt_pctbpopchng4070&#39;</span> <span class="st">&quot;pitt_pctbpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot;rd percentile%&quot;</span> <span class="st">&quot;2.0&quot;</span></span>
<span id="cb38-23"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-23" tabindex="-1"></a>        </span>
<span id="cb38-24"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-24" tabindex="-1"></a>        *Detroit</span>
<span id="cb38-25"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-25" tabindex="-1"></a>        summ bpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Detroit, MI&quot;</span></span>
<span id="cb38-26"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-26" tabindex="-1"></a>        <span class="kw">local</span> detr_bpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-27"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-27" tabindex="-1"></a>        PrintEst <span class="ot">`detr_bpopchng4070&#39;</span> <span class="st">&quot;detr_bpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentage points%&quot;</span> <span class="st">&quot;3.1&quot;</span></span>
<span id="cb38-28"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-28" tabindex="-1"></a></span>
<span id="cb38-29"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-29" tabindex="-1"></a>        summ pctbpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Detroit, MI&quot;</span></span>
<span id="cb38-30"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-30" tabindex="-1"></a>        <span class="kw">local</span> detr_pctbpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-31"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-31" tabindex="-1"></a>        PrintEst <span class="ot">`detr_pctbpopchng4070&#39;</span> <span class="st">&quot;detr_pctbpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot;th percentile%&quot;</span> <span class="st">&quot;2.0&quot;</span></span>
<span id="cb38-32"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-32" tabindex="-1"></a>        </span>
<span id="cb38-33"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-33" tabindex="-1"></a>        *Salt Lake City</span>
<span id="cb38-34"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-34" tabindex="-1"></a>        summ bpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Salt Lake City, UT&quot;</span></span>
<span id="cb38-35"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-35" tabindex="-1"></a>        <span class="kw">local</span> slc_bpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-36"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-36" tabindex="-1"></a>        PrintEst <span class="ot">`slc_bpopchng4070&#39;</span> <span class="st">&quot;slc_bpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentage points%&quot;</span> <span class="st">&quot;3.1&quot;</span></span>
<span id="cb38-37"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-37" tabindex="-1"></a></span>
<span id="cb38-38"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-38" tabindex="-1"></a>        summ pctbpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Salt Lake City, UT&quot;</span></span>
<span id="cb38-39"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-39" tabindex="-1"></a>        <span class="kw">local</span> slc_pctbpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-40"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-40" tabindex="-1"></a>        PrintEst <span class="ot">`slc_pctbpopchng4070&#39;</span> <span class="st">&quot;slc_pctbpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot;th percentile%&quot;</span> <span class="st">&quot;2.0&quot;</span></span>
<span id="cb38-41"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-41" tabindex="-1"></a>        </span>
<span id="cb38-42"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-42" tabindex="-1"></a>        *Washington, DC</span>
<span id="cb38-43"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-43" tabindex="-1"></a>        summ bpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Washington DC, DC&quot;</span></span>
<span id="cb38-44"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-44" tabindex="-1"></a>        <span class="kw">local</span> wadc_bpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-45"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-45" tabindex="-1"></a>        PrintEst <span class="ot">`wadc_bpopchng4070&#39;</span> <span class="st">&quot;wadc_bpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentage points%&quot;</span> <span class="st">&quot;3.1&quot;</span></span>
<span id="cb38-46"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-46" tabindex="-1"></a></span>
<span id="cb38-47"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-47" tabindex="-1"></a>        summ pctbpopchange1940_1970 <span class="kw">if</span> cz_name==<span class="st">&quot;Washington DC, DC&quot;</span></span>
<span id="cb38-48"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-48" tabindex="-1"></a>        <span class="kw">local</span> wadc_pctbpopchng4070 = <span class="ot">`r(mean)&#39;</span></span>
<span id="cb38-49"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb38-49" tabindex="-1"></a>        PrintEst <span class="ot">`wadc_pctbpopchng4070&#39;</span> <span class="st">&quot;wadc_pctbpopchng4070&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot;th percentile%&quot;</span> <span class="st">&quot;2.0&quot;</span></span></code></pre></div>
<p><img src="resources/Resources_ED/Figure2.png" alt="Figure 2" width="800px" /></p>
</div>
</div>
<div id="identification-strategy-1" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Identification strategy<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#identification-strategy-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Causal Framework &amp; Exclusion Restriction</strong></p>
<p>In this paper, the author faces endogeneity concerns stemming from two issues:</p>
<p><strong>1. Reverse causality</strong> because upward mobility in northern cities may have influenced the magnitude and direction of Black migration during the Great Migration, as migrants were likely to select destinations with better economic opportunities, and/or</p>
<p><strong>2. Omitted variable bias</strong> because of unobserved factors, such as pre-existing local economic conditions, racial dynamics, or industrialization levels, that could simultaneously influence both the extent of Black migration and future upward mobility.</p>
<p>To address this, the author employs a <strong>shift-share instrumental variable (IV) strategy</strong>, which leverages exogenous variation in migration “push factors” from southern counties combined with historical settlement patterns in northern cities. Indeed, Black southern migrants tended to move where previous migrants from their communities had settled, thus generating correlated origin-destination flows similar to those observed in the international migration context. Shocks to migrants’ origin locations (“push factors”) are plausibly orthogonal to shocks to the destinations (“pull factors”) that could also influence the location choices of future migrants. Interacting exogenous shifts in migration at the origin level with historical migration patterns in the destinations yields a potential instrument for Black population changes in the North.</p>
<p>The IV is constructed as the following:</p>
<p><strong>1. Share:</strong> The historical distribution of southern Black migrants across northern cities in 1940, i.e. original migration patterns.</p>
<p><strong>2. Shift:</strong> Exogenous “push factors” that caused migration from southern counties, such as declines in cotton production, economic shocks in agriculture, and World War II-related defense spending in southern counties.</p>
<p>The predicted Black population increase in a northern CZ is the shift-share instrument used in this paper. It is constructed as:
<span class="math display">\[
\widehat{\Delta b}_{\text{urban,CZ,1940–1970}} = \sum_{j \in S} \sum_{c \in CZ} \omega_{jc}^{1935–1940} \cdot \widehat{m}_j^{1940–1970}
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(\omega_{jc}^{1935–1940}\)</span> : The share of pre-1940 Black migrants from southern county <span class="math inline">\(j\)</span> who settled in city <span class="math inline">\(c\)</span> by 1940. This captures pre-existing linkages between southern counties and northern cities.</p></li>
<li><p><span class="math inline">\(\widehat{m}_j^{1940–1970}\)</span> : The predicted migration from southern county <span class="math inline">\(j\)</span> between 1940 and 1970.</p></li>
</ul>
<p>After computing predicted increases in the urban Black population in northern CZs using this method, the author uses the percentile of predicted increases, , to instrument for the percentile of observed increases in the Black population, GMCZ.</p>
</div>
<div id="model-equations" class="section level3 hasAnchor" number="2.2.6">
<h3><span class="header-section-number">2.2.6</span> Model Equations:<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#model-equations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>1. First Stage Equation</strong></p>
<p>The first stage equation relates the <strong>predicted percentile increase in the Black population</strong> (<span class="math inline">\(\widehat{GMCZ}\)</span>) to the <strong>observed percentile increase in the Black population</strong> (<span class="math inline">\(GMCZ\)</span>):</p>
<p><span class="math display">\[ GMCZ = \gamma + \delta \widehat{GMCZ} + X_{CZ}&#39; \mu + \epsilon_{CZ} \]</span>
Where:</p>
<ul>
<li><p><span class="math inline">\(GMCZ\)</span>: The observed percentile increase in the Black population in the CZ (1940–1970).</p></li>
<li><p><span class="math inline">\(\widehat{GMCZ}\)</span>: The predicted percentile increase in the Black population based on the instrument.</p></li>
<li><p><span class="math inline">\(X_{CZ}\)</span>: Vector of control variables (defined in the codebook under Baseline controls)</p></li>
<li><p><span class="math inline">\(\epsilon_{CZ}\)</span>: The error term.</p></li>
</ul>
<p><strong>2. Second Stage (2SLS) Equation</strong></p>
<p>The second stage equation estimates the causal effect of the observed Black population increase (<span class="math inline">\(GMCZ\)</span>) on upward mobility:</p>
<p><span class="math display">\[ \overline{y}_{p, CZ} = \alpha + \beta GMCZ + X_{CZ}&#39; \Gamma + \epsilon&#39;_{CZ} \]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(y_{p, CZ}\)</span>: The average income rank of children with parents at rank <span class="math inline">\(p\)</span> in the CZ.</p></li>
<li><p><span class="math inline">\(\beta\)</span>: The causal effect of the Great Migration (<span class="math inline">\(GMCZ\)</span>) on upward mobility (<span class="math inline">\(y_{p, CZ}\)</span>).</p></li>
<li><p><span class="math inline">\(X_{CZ}\)</span>: Vector of control variables.</p></li>
<li><p><span class="math inline">\(\epsilon&#39;_{CZ}\)</span>: The error term.</p></li>
</ul>
</div>
<div id="results-on-upward-mobility" class="section level3 hasAnchor" number="2.2.7">
<h3><span class="header-section-number">2.2.7</span> Results on upward mobility<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#results-on-upward-mobility" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To test the impact of the Great Migration on the upward mobility of Black and White families, the author regresses key outcomes (detailed in the codebook) on the percentile of observed Black population increase.</p>
<p>In this section, we’re replicating two tables for the main results: the great migration impact on white families, and the great migration impact on black families. Each table includes the results of the first-stage regression, the ordinary least squares regression, the reduced form regression, and the two stage least squares regressions. Each regression is run on our set of six outcome variables, for both black and white families. Given the large amount of work, we use a loop for efficiency.</p>
<p>A loop is an interactive mechanism that allows the execution of specified commands for each value in the specified list. Here, we loop multiple times. Our first essential loop differentiates between white and black families. In the line (foreach r in “black” “white””), our “list” is “black” and “white” and “foreach” black and white, the loop will execute the code inside it.</p>
<p>Inside the code, we loop over outcomes to run each regression with a different y, defined inside the first main loop. Indeed, each loop for each model (<code>RF</code>, <code>2SLS</code>, <code>OLS</code>, and <code>First-Stage</code>) starts with (<code>foreach y in</code> `<code>outcomes'{</code>) before executing the actual regression on different Ys.</p>
<p>Before explaining the specificities of each model, let’s go through potentially tricky commands used in all of them to make it easier to read.</p>
<ul>
<li><p><code>qui</code> stands for quietly, where we execute a command without seeing its result in the stata window.</p></li>
<li><p><code>test $x_iv = 0</code> tests for whether the IV is significantly correlated with X.</p></li>
<li><p><code>Estadd scalar</code>: adds a row to the final table that includes values (or scalars) we choose to save. When we read a line like <code>sum `y'</code>, <code>estadd scalar basemean=r(mean)</code>, <code>estadd scalar sd=r(sd)</code> , <code>estadd scalar gm_sd=`ols_SD'</code>, we know that we are summarizing the outcome variable, and adding its mean, SD, and the <code>ols_SD</code> we saved earlier as an additional row down the table we’re compiling.</p></li>
<li><p>Finally, <code>eststo</code> saves estimates. <code>eststo clear</code> makes sure the memory is empty of previously saved estimates. <code>esttab</code> compiles the table, with options for us to polish it.</p></li>
</ul>
<p><strong>Note</strong>: we will be splitting the loop for this section into multiple parts to explain its specifities. In the do-file, it can be run all together.</p>
<p>The first section creates a loop to capitalize the labels black and white. Then, we define local outcomes which we will loop over.</p>
<div class="sourceCode" id="cb39" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb39-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-1" tabindex="-1"></a>* Replicating Tables 5 and 6</span>
<span id="cb39-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-2" tabindex="-1"></a><span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb39-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-3" tabindex="-1"></a></span>
<span id="cb39-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-4" tabindex="-1"></a>* Start the loop <span class="kw">for</span> racial groups</span>
<span id="cb39-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-5" tabindex="-1"></a><span class="kw">foreach</span> <span class="fu">r</span> <span class="kw">in</span> <span class="st">&quot;black&quot;</span> <span class="st">&quot;white&quot;</span> {</span>
<span id="cb39-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-6" tabindex="-1"></a>    <span class="kw">local</span> race <span class="st">&quot;Black&quot;</span>    </span>
<span id="cb39-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-7" tabindex="-1"></a>    <span class="kw">if</span> <span class="st">&quot;`r&#39;&quot;</span> == <span class="st">&quot;black&quot;</span> {</span>
<span id="cb39-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-8" tabindex="-1"></a>        <span class="kw">local</span> race <span class="st">&quot;White&quot;</span></span>
<span id="cb39-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-9" tabindex="-1"></a>    }</span>
<span id="cb39-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-10" tabindex="-1"></a></span>
<span id="cb39-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-11" tabindex="-1"></a>    * Define outcomes <span class="kw">for</span> the current racial <span class="fu">group</span></span>
<span id="cb39-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb39-12" tabindex="-1"></a>    <span class="kw">local</span> outcomes kfr_<span class="ot">`r&#39;</span>_pooled_p252015 kir_<span class="ot">`r&#39;</span>_female_p252015 kir_<span class="ot">`r&#39;</span>_male_p252015 kfr_<span class="ot">`r&#39;</span>_pooled_p752015 kir_<span class="ot">`r&#39;</span>_female_p752015 kir_<span class="ot">`r&#39;</span>_male_p752015</span></code></pre></div>
<div id="first-stage-regression" class="section level4 hasAnchor" number="2.2.7.1">
<h4><span class="header-section-number">2.2.7.1</span> First-stage regression<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#first-stage-regression" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The loop clears any estimates in memory, summarizes GM and extracts its SD into the local <code>ols_SD</code>, regresses the instrument on the main independent variable, tests its significance and saves the F-stat which is necessary to check whether it matches the relevance condition for a good instrument (F-stat &gt; 10). Although we see lines of code related to y, these are irrelevant at the first-stage. As we will see in the tables, the coefficient and F-stat for all 6 Ys is the same.</p>
<div class="sourceCode" id="cb40" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb40-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-1" tabindex="-1"></a>    * First Stage Analysis</span>
<span id="cb40-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-2" tabindex="-1"></a>    eststo <span class="kw">clear</span></span>
<span id="cb40-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-3" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="fu">y</span> <span class="kw">in</span> <span class="ot">`outcomes&#39;</span> {</span>
<span id="cb40-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-4" tabindex="-1"></a>        <span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb40-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-5" tabindex="-1"></a>        <span class="kw">keep</span> <span class="kw">if</span> <span class="ot">`y&#39;</span> != .</span>
<span id="cb40-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-6" tabindex="-1"></a>        <span class="kw">qui</span> <span class="kw">sum</span> GM</span>
<span id="cb40-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-7" tabindex="-1"></a>        <span class="kw">local</span> ols_SD = <span class="ot">`r(sd)&#39;</span></span>
<span id="cb40-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-8" tabindex="-1"></a>        <span class="kw">replace</span> <span class="ot">`y&#39;</span> = 100 * <span class="ot">`y&#39;</span></span>
<span id="cb40-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-9" tabindex="-1"></a>        <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">${baseline_controls}</span> <span class="kw">if</span> <span class="ot">`y&#39;</span> != .</span>
<span id="cb40-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-10" tabindex="-1"></a>        eststo <span class="ot">`y&#39;</span></span>
<span id="cb40-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-11" tabindex="-1"></a>        <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb40-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-12" tabindex="-1"></a>        estadd <span class="fu">scalar</span> fstat = <span class="ot">`r(F)&#39;</span></span>
<span id="cb40-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-13" tabindex="-1"></a>    }</span>
<span id="cb40-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-14" tabindex="-1"></a>    cd <span class="st">&quot;$XX&quot;</span></span>
<span id="cb40-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-15" tabindex="-1"></a>    esttab <span class="ot">`outcomes&#39;</span> <span class="kw">using</span> <span class="st">&quot;`r&#39;_hh_table.tex&quot;</span>, frag <span class="kw">replace</span>  varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb40-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-16" tabindex="-1"></a>    <span class="kw">stats</span>(fstat, labels(  <span class="fu">F</span>-Stat)) <span class="kw">keep</span>(<span class="ot">$x_iv</span>) mgroups(<span class="st">&quot;&quot;</span>, <span class="kw">prefix</span>(\multicolumn{6}{c}{First Stage <span class="kw">on</span> GM})) nonumber <span class="co">///</span></span>
<span id="cb40-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb40-17" tabindex="-1"></a>    nostar nomtitle <span class="kw">nonotes</span> nolines nogaps prefoot(\cmidrule(lr){2-7}) postfoot(\cmidrule(lr){2-7}) substitute({<span class="kw">table</span>} {threeparttable}) </span></code></pre></div>
<p>Here, we’ll learn how to export a table and make it publication ready. First, the table is exported using <code>esttab</code> into a <code>.tex</code> file, since <strong>LateX</strong> provides consistent formatting that is widely accepted by academic publishers.</p>
<ul>
<li><p>The <code>frag</code> option allows us to fragment the table into multiple sections to be able to insert formatting options like horizontal lines to demarcate different sections.</p></li>
<li><p><code>replace</code> replaces the table in the directory if it is already saved.</p></li>
<li><p><code>varwidth(25)</code> makes sure the variables are aligned in columns with consistent widths, or in this case, 25 characters.</p></li>
<li><p><code>label</code> shows the variable labels instead of variable names.</p></li>
<li><p>The <code>se</code> option adds standard errors to the table next to the regression coefficient</p></li>
<li><p><code>stats()</code> specifies the summary statistics in the table. Here, we are keeping the fstat</p></li>
<li><p><code>keep()</code> only keeps necessary variables. Here, we are only showcasing the coefficient of our <code>x_iv</code> in the table.</p></li>
<li><p>The code ensures clear formatting: Suppresses stars (<code>nostar</code>) , titles (<code>nomtitle</code>), notes (<code>nonotes</code>) , unnecessary lines (<code>nogaps</code>).</p></li>
</ul>
<p>These are options that can be used to extract any table, even if not in the tex format. Now we move to <code>.tex</code> specific options:</p>
<ul>
<li><p><code>mgroups</code> is used to groups columns under a common label. It will appear on top of the columns that are relative to our first stage regression, indicating that they are “under the same umbrella”. Further enhancements are also made: prefix is used. It allows us to edit the title. The name of the <code>mgroup</code> is empty <code>””</code> because it will be added in the prefix, which has the following form: <code>prefix(\multicolumn{span}{centering}{text}’</code>. <code>Span</code> specifies over how many columns the title will span over. Since we’re looping over 6 outcomes, that will be 6. <code>{c}</code> centers the title at the center of the columns. Finally, we insert the title in <code>{text}</code>.</p></li>
<li><p><code>prefoot()</code> inserts a horizontal line before the footer of the table in latex, and <code>postfoot()</code> adds a line after the footer marking the end of the table. For instance, <code>prefoot(\cmidrule(lr){2-7})</code> spans the line from column 2 to column 7, and <code>lr</code> aligns the line to the left (l) and right (r) edges of the table columns.</p></li>
<li><p>Finally, <code>substitute({table} {threeparttable})</code> subsidies the “table” environment to a “threeparttable” environment that gives a more structure approach in latex as it splits the table into three distinct parts: the caption above the table, the main body, and the notes below the table.</p></li>
</ul>
</div>
<div id="ols-and-reduced-form-regressions" class="section level4 hasAnchor" number="2.2.7.2">
<h4><span class="header-section-number">2.2.7.2</span> OLS and Reduced form Regressions<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#ols-and-reduced-form-regressions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As part of the same ongoing loop, we then conduct Ordinary Least Squares (OLS) and Reduced form (RF) regressions for a series of outcome variables (outcomes) to evaluate the impact of the treatment variable <code>\$x_ols</code> on each outcome while controlling for baseline characteristics <code>\${baseline_controls}</code> and the direct impact of the instrument on y, respectively. It iteratively loads the dataset, removes missing values for the current outcome, and rescales outcomes to percentile ranks for interpretability. The regression results for each outcome are stored with eststo. We then append (<code>esttab</code>, <code>append</code>) the regression results to our first LaTeX table file, structured to compare pooled, women, and men groups across low and high income categories as you can read in this command:</p>
<div class="sourceCode" id="cb41" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb41-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb41-1" tabindex="-1"></a>prehead(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">&quot;</span> <span class="st">&quot;&amp;\multicolumn{3}{c}{Low Income}&amp;\multicolumn{3}{c}{High Income}</span><span class="ch">\\</span><span class="st">&quot;</span> <span class="co">///</span></span>
<span id="cb41-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb41-2" tabindex="-1"></a><span class="st">&quot;&amp;\multicolumn{1}{c}{Pooled}&amp;\multicolumn{1}{c}{Women}&amp;\multicolumn{1}{c}{Men}&amp;\multicolumn{1}{c}{Pooled}&amp;\multicolumn{1}{c}{Women}&amp;\multicolumn{1}{c}{Men}</span></span></code></pre></div>
<p>It names each column accordingly, and gives an overarching title for low income vs high income individuals with multicolumn and subtitles with <code>multicolumn(1)</code>, <code>multicolumn(2)</code>, ect. with the same options for table design that we explained earlier.</p>
<div class="sourceCode" id="cb42" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb42-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-1" tabindex="-1"></a></span>
<span id="cb42-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-2" tabindex="-1"></a>* OLS   </span>
<span id="cb42-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-3" tabindex="-1"></a>    eststo <span class="kw">clear</span></span>
<span id="cb42-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-4" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="fu">y</span> <span class="kw">in</span> <span class="ot">`outcomes&#39;</span>{</span>
<span id="cb42-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-5" tabindex="-1"></a>    <span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb42-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-6" tabindex="-1"></a>    <span class="kw">keep</span> <span class="kw">if</span> <span class="ot">`y&#39;</span>!=.</span>
<span id="cb42-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-7" tabindex="-1"></a>    * Rescale treatment <span class="kw">in</span> terms <span class="kw">of</span> standard <span class="kw">deviations</span></span>
<span id="cb42-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-8" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">sum</span> GM</span>
<span id="cb42-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-9" tabindex="-1"></a>    <span class="kw">local</span> ols_SD=<span class="ot">`r(sd)&#39;</span></span>
<span id="cb42-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-10" tabindex="-1"></a>    * Rescale outcome <span class="kw">in</span> percentile ranks</span>
<span id="cb42-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-11" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">`y&#39;</span>=100*<span class="ot">`y&#39;</span></span>
<span id="cb42-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-12" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span>  <span class="ot">${baseline_controls}</span>  <span class="kw">if</span> <span class="ot">`y&#39;</span>!=.</span>
<span id="cb42-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-13" tabindex="-1"></a>    eststo <span class="ot">`y&#39;</span></span>
<span id="cb42-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-14" tabindex="-1"></a>    }</span>
<span id="cb42-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-15" tabindex="-1"></a>    cd <span class="st">&quot;$XX&quot;</span></span>
<span id="cb42-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-16" tabindex="-1"></a>    esttab <span class="ot">`outcomes&#39;</span> <span class="kw">using</span> <span class="st">&quot;`r&#39;_hh_table.tex&quot;</span>, frag <span class="kw">append</span>  varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb42-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-17" tabindex="-1"></a>    prehead(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">&quot;</span> <span class="st">&quot;&amp;\multicolumn{3}{c}{Low Income}&amp;\multicolumn{3}{c}{High Income}</span><span class="ch">\\</span><span class="st">&quot;</span> <span class="co">///</span></span>
<span id="cb42-18"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-18" tabindex="-1"></a>    <span class="st">&quot;&amp;\multicolumn{1}{c}{Pooled}&amp;\multicolumn{1}{c}{Women}&amp;\multicolumn{1}{c}{Men}&amp;\multicolumn{1}{c}{Pooled}&amp;\multicolumn{1}{c}{Women}&amp;\multicolumn{1}{c}{Men} </span><span class="ch">\\</span><span class="st">\cmidrule(lr){2-7}&quot;</span>)  <span class="co">///</span></span>
<span id="cb42-19"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-19" tabindex="-1"></a>    <span class="kw">stats</span>( r2, labels( R-squared)) <span class="kw">keep</span>(<span class="ot">$x_ols</span>) mgroups(<span class="st">&quot;&quot;</span>, <span class="kw">prefix</span>(\multicolumn{6}{c}{Ordinary Least Squares})) nonumber <span class="co">///</span></span>
<span id="cb42-20"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-20" tabindex="-1"></a>    nostar nomtitle <span class="kw">nonotes</span> nolines nogaps prefoot(\cmidrule(lr){2-7}) postfoot(\cmidrule(lr){2-7}) substitute({<span class="kw">table</span>} {threeparttable})</span>
<span id="cb42-21"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-21" tabindex="-1"></a>    </span>
<span id="cb42-22"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-22" tabindex="-1"></a>    </span>
<span id="cb42-23"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-23" tabindex="-1"></a>    </span>
<span id="cb42-24"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-24" tabindex="-1"></a>* RF    </span>
<span id="cb42-25"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-25" tabindex="-1"></a>    eststo <span class="kw">clear</span></span>
<span id="cb42-26"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-26" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="fu">y</span> <span class="kw">in</span> <span class="ot">`outcomes&#39;</span>{</span>
<span id="cb42-27"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-27" tabindex="-1"></a>    <span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb42-28"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-28" tabindex="-1"></a>    <span class="kw">keep</span> <span class="kw">if</span> <span class="ot">`y&#39;</span>!=.</span>
<span id="cb42-29"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-29" tabindex="-1"></a>    * Rescale treatment <span class="kw">in</span> terms <span class="kw">of</span> standard <span class="kw">deviations</span></span>
<span id="cb42-30"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-30" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">sum</span> GM</span>
<span id="cb42-31"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-31" tabindex="-1"></a>    <span class="kw">local</span> ols_SD=<span class="ot">`r(sd)&#39;</span></span>
<span id="cb42-32"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-32" tabindex="-1"></a>    * Rescale outcome <span class="kw">in</span> percentile ranks</span>
<span id="cb42-33"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-33" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">`y&#39;</span>=100*<span class="ot">`y&#39;</span></span>
<span id="cb42-34"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-34" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_iv</span>  <span class="ot">${baseline_controls}</span> <span class="kw">if</span> <span class="ot">`y&#39;</span>!=.</span>
<span id="cb42-35"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-35" tabindex="-1"></a>    eststo <span class="ot">`y&#39;</span></span>
<span id="cb42-36"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-36" tabindex="-1"></a>    }</span>
<span id="cb42-37"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-37" tabindex="-1"></a>    cd <span class="st">&quot;$XX&quot;</span></span>
<span id="cb42-38"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-38" tabindex="-1"></a>    esttab <span class="ot">`outcomes&#39;</span> <span class="kw">using</span> <span class="st">&quot;`r&#39;_hh_table.tex&quot;</span>, frag <span class="kw">append</span>  varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb42-39"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-39" tabindex="-1"></a>    <span class="kw">stats</span>( r2, labels( R-squared)) <span class="kw">keep</span>(<span class="ot">$x_iv</span>) mgroups(<span class="st">&quot;&quot;</span>, <span class="kw">prefix</span>(\multicolumn{6}{c}{Reduced Form})) nonumber  <span class="co">///</span></span>
<span id="cb42-40"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb42-40" tabindex="-1"></a>    nostar nomtitle <span class="kw">nonotes</span> nolines nogaps prefoot(\cmidrule(lr){2-7}) postfoot(\cmidrule(lr){2-7}) substitute({<span class="kw">table</span>} {threeparttable}) </span></code></pre></div>
</div>
<div id="two-stage-least-squares-2sls-regressions" class="section level4 hasAnchor" number="2.2.7.3">
<h4><span class="header-section-number">2.2.7.3</span> Two-Stage Least Squares (2SLS) regressions<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#two-stage-least-squares-2sls-regressions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We then perform Two-Stage Least Squares (2SLS) regressions to address endogeneity and estimate causal effects between the Great Migration <code>$x_ols</code> and outcomes outcomes. For 2SLS, we have to use the command <code>ivreg2</code>. We write <code>ivreg2 y (x_ols = x_iv)</code> with <code>=</code> to specify that we are concerned about endogeneity in variable <code>x_ols</code> and we’re using the IV <code>x_iv</code> to address it. The instrument <code>$x_iv</code> predicts the endogenous treatment in the first stage, while the second stage regresses the outcomes on the predicted treatment, controlling for <code>baseline_controls</code>. Outcome variables are again scaled. After running the 2SLS, we save the coefficient, absolute value of the coefficient, and standard error into locals. We also export the coefficients using our Printest program. We finish by saving the Mean Rank, SD Rank, and SD GM as scalars and appending the tex table to our former outputs. Finally, we create a footer by exporting a table that includes everything we want to add (e.g. our scalars) and appending it to the original.</p>
<div class="sourceCode" id="cb43" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb43-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-1" tabindex="-1"></a></span>
<span id="cb43-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-2" tabindex="-1"></a>* 2SLS  </span>
<span id="cb43-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-3" tabindex="-1"></a>    eststo <span class="kw">clear</span></span>
<span id="cb43-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-4" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="fu">y</span> <span class="kw">in</span> <span class="ot">`outcomes&#39;</span>{</span>
<span id="cb43-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-5" tabindex="-1"></a>    <span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb43-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-6" tabindex="-1"></a>    <span class="kw">keep</span> <span class="kw">if</span> <span class="ot">`y&#39;</span>!=.</span>
<span id="cb43-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-7" tabindex="-1"></a>    * Rescale treatment <span class="kw">in</span> terms <span class="kw">of</span> standard <span class="kw">deviations</span></span>
<span id="cb43-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-8" tabindex="-1"></a>    <span class="kw">qui</span> <span class="kw">sum</span> GM</span>
<span id="cb43-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-9" tabindex="-1"></a>    <span class="kw">local</span> ols_SD=<span class="ot">`r(sd)&#39;</span></span>
<span id="cb43-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-10" tabindex="-1"></a>    * Rescale outcome <span class="kw">in</span> percentile ranks</span>
<span id="cb43-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-11" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">`y&#39;</span>=100*<span class="ot">`y&#39;</span></span>
<span id="cb43-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-12" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> )  <span class="ot">${baseline_controls}</span>  <span class="kw">if</span> <span class="ot">`y&#39;</span>!=., first</span>
<span id="cb43-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-13" tabindex="-1"></a>    <span class="kw">local</span> GM_<span class="ot">`y&#39;</span> = _b[<span class="ot">$x_ols</span>]</span>
<span id="cb43-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-14" tabindex="-1"></a>    <span class="kw">local</span> GM_<span class="ot">`y&#39;</span>_abs = <span class="fu">abs</span>(_b[<span class="ot">$x_ols</span>])</span>
<span id="cb43-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-15" tabindex="-1"></a>    <span class="kw">local</span> GM_<span class="ot">`y&#39;</span>_se : <span class="kw">di</span> %4.3f _se[<span class="ot">$x_ols</span>]</span>
<span id="cb43-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-16" tabindex="-1"></a>    PrintEst <span class="ot">`GM_`y&#39;</span>&#39; <span class="st">&quot;GM_`y&#39;&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentile points (s.e. = `GM_`y&#39;_se&#39;)%&quot;</span> <span class="st">&quot;4.3&quot;</span></span>
<span id="cb43-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-17" tabindex="-1"></a>    PrintEst <span class="ot">`GM_`y&#39;</span>_abs&#39; <span class="st">&quot;GM_`y&#39;_abs&quot;</span> <span class="st">&quot;&quot;</span> <span class="st">&quot; percentile points (s.e. = `GM_`y&#39;_se&#39;)%&quot;</span> <span class="st">&quot;4.3&quot;</span></span>
<span id="cb43-18"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-18" tabindex="-1"></a>    eststo <span class="ot">`y&#39;</span></span>
<span id="cb43-19"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-19" tabindex="-1"></a>    <span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span>
<span id="cb43-20"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-20" tabindex="-1"></a>    <span class="kw">keep</span> <span class="kw">if</span> <span class="ot">`y&#39;</span>!=.</span>
<span id="cb43-21"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-21" tabindex="-1"></a>    <span class="kw">sum</span> <span class="ot">`y&#39;</span> </span>
<span id="cb43-22"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-22" tabindex="-1"></a>    estadd <span class="fu">scalar</span> basemean=<span class="fu">r</span>(<span class="kw">mean</span>)</span>
<span id="cb43-23"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-23" tabindex="-1"></a>    estadd <span class="fu">scalar</span> <span class="fu">sd</span>=<span class="fu">r</span>(<span class="fu">sd</span>)  </span>
<span id="cb43-24"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-24" tabindex="-1"></a>    estadd <span class="fu">scalar</span> gm_sd=<span class="ot">`ols_SD&#39;</span></span>
<span id="cb43-25"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-25" tabindex="-1"></a>    }</span>
<span id="cb43-26"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-26" tabindex="-1"></a>    </span>
<span id="cb43-27"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-27" tabindex="-1"></a>    cd <span class="st">&quot;$XX&quot;</span></span>
<span id="cb43-28"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-28" tabindex="-1"></a>    esttab <span class="ot">`outcomes&#39;</span> <span class="kw">using</span> <span class="st">&quot;`r&#39;_hh_table.tex&quot;</span>, frag <span class="kw">append</span>  varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb43-29"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-29" tabindex="-1"></a>    <span class="kw">keep</span>(<span class="ot">$x_ols</span>) mgroups(<span class="st">&quot;&quot;</span>, <span class="kw">prefix</span>(\multicolumn{6}{c}{Two-stage least squared})) nonumber <span class="co">///</span></span>
<span id="cb43-30"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-30" tabindex="-1"></a>    nostar nomtitle  <span class="kw">nonotes</span> nolines nogaps prefoot(\cmidrule(lr){2-7}) substitute({<span class="kw">table</span>} {threeparttable}) </span>
<span id="cb43-31"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-31" tabindex="-1"></a>    </span>
<span id="cb43-32"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-32" tabindex="-1"></a>    * Footer</span>
<span id="cb43-33"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-33" tabindex="-1"></a>    cd <span class="st">&quot;$XX&quot;</span></span>
<span id="cb43-34"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-34" tabindex="-1"></a>    esttab <span class="ot">`outcomes&#39;</span> <span class="kw">using</span> <span class="st">&quot;`r&#39;_hh_table.tex&quot;</span>, frag <span class="kw">append</span>  varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb43-35"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-35" tabindex="-1"></a>    <span class="kw">stats</span>( <span class="kw">N</span>  basemean <span class="fu">sd</span> gm_sd, labels(<span class="st">&quot;Observations&quot;</span>  <span class="st">&quot;Mean Rank&quot;</span> <span class="st">&quot;SD Rank&quot;</span> <span class="st">&quot;SD GM&quot;</span>)) <span class="kw">drop</span>(*) nonumber <span class="co">///</span></span>
<span id="cb43-36"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-36" tabindex="-1"></a>    nostar nomtitle  <span class="kw">nonotes</span> nolines nogaps prefoot(\cmidrule(lr){2-7}) substitute({<span class="kw">table</span>} {threeparttable}) </span>
<span id="cb43-37"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb43-37" tabindex="-1"></a>    }</span></code></pre></div>
<p>We arrive to this outcome:</p>
<p><img src="resources/Resources_ED/Table%205.png" alt="Table 5" width="800px" /></p>
<p><img src="resources/Resources_ED/Table%206.png" alt="Table 5" width="800px" /></p>
</div>
</div>
<div id="robustness-checks" class="section level3 hasAnchor" number="2.2.8">
<h3><span class="header-section-number">2.2.8</span> Robustness checks<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#robustness-checks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Table 9</strong> tests the robustness of the paper’s results on the effect of the great migration on the upward mobility of black men by adding a new set of controls to check the robustness of the results to alternative specifications.</p>
<p>First, we store the variables used in each of 8 columns of the table in macros for efficiency and convenience</p>
<div class="sourceCode" id="cb44" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb44-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-1" tabindex="-1"></a></span>
<span id="cb44-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-2" tabindex="-1"></a><span class="kw">global</span> nocon <span class="st">&quot;v2_blackmig3539_share1940&quot;</span></span>
<span id="cb44-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-3" tabindex="-1"></a><span class="kw">global</span> divfe <span class="st">&quot;v2_blackmig3539_share1940 reg2 reg3 reg4&quot;</span> </span>
<span id="cb44-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-4" tabindex="-1"></a><span class="kw">global</span> baseline <span class="st">&quot;frac_all_upm1940 mfg_lfshare1940 v2_blackmig3539_share1940 reg2 reg3 reg4&quot;</span></span>
<span id="cb44-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-5" tabindex="-1"></a><span class="kw">global</span> emp <span class="st">&quot;frac_all_upm1940 mfg_lfshare1940 v2_blackmig3539_share1940 reg2 reg3 reg4 emp_hat&quot;</span></span>
<span id="cb44-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-6" tabindex="-1"></a><span class="kw">global</span> flexbpop40 <span class="st">&quot;frac_all_upm1940 mfg_lfshare1940 v2_blackmig3539_share1940 reg2 reg3 reg4 i.bpopquartile&quot;</span>        </span>
<span id="cb44-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-7" tabindex="-1"></a><span class="kw">global</span> swmig <span class="st">&quot;frac_all_upm1940 mfg_lfshare1940 v2_blackmig3539_share1940 reg2 reg3 reg4  GM_hat8&quot;</span></span>
<span id="cb44-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-8" tabindex="-1"></a><span class="kw">global</span> eurmig <span class="st">&quot;frac_all_upm1940 mfg_lfshare1940 v2_blackmig3539_share1940 reg2 reg3 reg4  eur_mig&quot;</span></span>
<span id="cb44-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-9" tabindex="-1"></a><span class="kw">global</span> supmob <span class="st">&quot;frac_all_upm1940 mfg_lfshare1940 v2_blackmig3539_share1940 reg2 reg3 reg4  vm_blacksmob1940&quot;</span></span>
<span id="cb44-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-10" tabindex="-1"></a></span>
<span id="cb44-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-11" tabindex="-1"></a>eststo <span class="kw">clear</span></span>
<span id="cb44-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb44-12" tabindex="-1"></a><span class="kw">use</span> <span class="st">&quot;${XX}/GM_cz_final_dataset.dta&quot;</span>, <span class="kw">clear</span></span></code></pre></div>
<p>Before we break down the rest of the code, let’s look at a new commands. <code>estadd local &lt;name&gt; "Y"/"N"</code> saves labels indicating which controls are included to track model features (Yes if the controls are added /No if not). When we compile the table, we’ll add <code>name</code> as a statistic in separate table rows.</p>
<div class="sourceCode" id="cb45" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb45-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-1" tabindex="-1"></a>    <span class="kw">local</span> <span class="fu">y</span>  kir_black_male_p252015     </span>
<span id="cb45-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-2" tabindex="-1"></a></span>
<span id="cb45-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-3" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">`y&#39;</span> = 100 * <span class="ot">`y&#39;</span></span>
<span id="cb45-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-4" tabindex="-1"></a>    </span>
<span id="cb45-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-5" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$nocon</span> </span>
<span id="cb45-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-6" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb45-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-7" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb45-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-8" tabindex="-1"></a></span>
<span id="cb45-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-9" tabindex="-1"></a><span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$nocon</span>  </span>
<span id="cb45-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-10" tabindex="-1"></a>eststo nocon_ols</span>
<span id="cb45-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-11" tabindex="-1"></a>estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;N&quot;</span></span>
<span id="cb45-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-12" tabindex="-1"></a>estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;N&quot;</span></span>
<span id="cb45-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-13" tabindex="-1"></a>estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb45-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-14" tabindex="-1"></a>estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb45-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-15" tabindex="-1"></a>estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb45-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-16" tabindex="-1"></a>estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb45-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-17" tabindex="-1"></a>estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb45-18"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-18" tabindex="-1"></a>estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span></span>
<span id="cb45-19"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-19" tabindex="-1"></a></span>
<span id="cb45-20"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-20" tabindex="-1"></a>ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span>) <span class="ot">$nocon</span>  </span>
<span id="cb45-21"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-21" tabindex="-1"></a>eststo nocon</span>
<span id="cb45-22"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-22" tabindex="-1"></a>estadd <span class="fu">scalar</span> fstat = <span class="ot">`fstat&#39;</span>  <span class="co">// Now `fstat` is correctly defined</span></span>
<span id="cb45-23"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-23" tabindex="-1"></a></span>
<span id="cb45-24"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-24" tabindex="-1"></a><span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$divfe</span> </span>
<span id="cb45-25"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-25" tabindex="-1"></a><span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb45-26"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb45-26" tabindex="-1"></a><span class="kw">local</span> fstat = <span class="fu">r</span>(<span class="fu">F</span>)  <span class="co">// Update `fstat` for the new test</span></span></code></pre></div>
<p><code>local y kir_black_male_p252015</code> and <code>replace `y' = 100 * `y'</code> prepare the dependent variable by turning it into a local then converting it to percentages, respectively.</p>
<p>Then, each specification (table column) goes through the same process: first-stage regression, OLS regression, and then IV regression. The first estimation with no controls has been run first and the we run the first-stage regression and save the F-stat into the local scalar named <code>fstat</code>, then we run an OLS, saves the estimation of the results using eststo under the name <code>nocon_ols</code>, and adds the specifications of the model using <code>estadd</code>.
Finally, We run the IV regression for which the coefficient is saved with eststo under the name <code>nocon</code>, and save the F-stat value under the same <code>fstat</code> local.</p>
<div class="sourceCode" id="cb46" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb46-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-1" tabindex="-1"></a><span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$divfe</span>    </span>
<span id="cb46-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-2" tabindex="-1"></a>eststo divfe_ols</span>
<span id="cb46-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-3" tabindex="-1"></a>estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-4" tabindex="-1"></a>estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;N&quot;</span></span>
<span id="cb46-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-5" tabindex="-1"></a>estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb46-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-6" tabindex="-1"></a>estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb46-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-7" tabindex="-1"></a>estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb46-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-8" tabindex="-1"></a>estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb46-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-9" tabindex="-1"></a>estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb46-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-10" tabindex="-1"></a>estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-11" tabindex="-1"></a>    </span>
<span id="cb46-12"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-12" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> )  <span class="ot">$divfe</span>    </span>
<span id="cb46-13"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-13" tabindex="-1"></a>    eststo divfe</span>
<span id="cb46-14"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-14" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat=<span class="ot">`fstat&#39;</span></span>
<span id="cb46-15"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-15" tabindex="-1"></a>    </span>
<span id="cb46-16"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-16" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$baseline</span> </span>
<span id="cb46-17"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-17" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb46-18"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-18" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb46-19"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-19" tabindex="-1"></a></span>
<span id="cb46-20"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-20" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$baseline</span> </span>
<span id="cb46-21"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-21" tabindex="-1"></a>    eststo baseline_ols</span>
<span id="cb46-22"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-22" tabindex="-1"></a>    estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-23"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-23" tabindex="-1"></a>    estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-24"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-24" tabindex="-1"></a>    estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb46-25"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-25" tabindex="-1"></a>    estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb46-26"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-26" tabindex="-1"></a>    estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb46-27"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-27" tabindex="-1"></a>    estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb46-28"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-28" tabindex="-1"></a>    estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb46-29"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-29" tabindex="-1"></a>    estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span> </span>
<span id="cb46-30"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-30" tabindex="-1"></a></span>
<span id="cb46-31"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-31" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> ) <span class="ot">$baseline</span> </span>
<span id="cb46-32"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-32" tabindex="-1"></a>    eststo baseline</span>
<span id="cb46-33"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-33" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat=<span class="ot">`fstat&#39;</span></span>
<span id="cb46-34"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-34" tabindex="-1"></a>    </span>
<span id="cb46-35"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-35" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$emp</span> </span>
<span id="cb46-36"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-36" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb46-37"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-37" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb46-38"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-38" tabindex="-1"></a></span>
<span id="cb46-39"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-39" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$emp</span>  </span>
<span id="cb46-40"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-40" tabindex="-1"></a>    eststo emp_ols</span>
<span id="cb46-41"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-41" tabindex="-1"></a>    estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-42"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-42" tabindex="-1"></a>    estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-43"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-43" tabindex="-1"></a>    estadd <span class="kw">local</span> hasemp         <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-44"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-44" tabindex="-1"></a>    estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb46-45"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-45" tabindex="-1"></a>    estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb46-46"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-46" tabindex="-1"></a>    estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb46-47"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-47" tabindex="-1"></a>    estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb46-48"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-48" tabindex="-1"></a>    estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span> </span>
<span id="cb46-49"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-49" tabindex="-1"></a></span>
<span id="cb46-50"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-50" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> ) <span class="ot">$emp</span>  </span>
<span id="cb46-51"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-51" tabindex="-1"></a>    eststo emp</span>
<span id="cb46-52"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-52" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat=<span class="ot">`fstat&#39;</span></span>
<span id="cb46-53"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-53" tabindex="-1"></a></span>
<span id="cb46-54"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-54" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$flexbpop40</span> </span>
<span id="cb46-55"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-55" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb46-56"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-56" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb46-57"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-57" tabindex="-1"></a></span>
<span id="cb46-58"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-58" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$flexbpop40</span>  </span>
<span id="cb46-59"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-59" tabindex="-1"></a>    eststo flexbpop40_ols</span>
<span id="cb46-60"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-60" tabindex="-1"></a>    estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-61"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-61" tabindex="-1"></a>    estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-62"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-62" tabindex="-1"></a>    estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb46-63"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-63" tabindex="-1"></a>    estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-64"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-64" tabindex="-1"></a>    estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb46-65"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-65" tabindex="-1"></a>    estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb46-66"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-66" tabindex="-1"></a>    estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb46-67"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-67" tabindex="-1"></a>    estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-68"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-68" tabindex="-1"></a></span>
<span id="cb46-69"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-69" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> ) <span class="ot">$flexbpop40</span>  </span>
<span id="cb46-70"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-70" tabindex="-1"></a>    eststo flexbpop40</span>
<span id="cb46-71"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-71" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat=<span class="ot">`fstat&#39;</span></span>
<span id="cb46-72"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-72" tabindex="-1"></a>    </span>
<span id="cb46-73"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-73" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$swmig</span> </span>
<span id="cb46-74"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-74" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb46-75"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-75" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb46-76"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-76" tabindex="-1"></a></span>
<span id="cb46-77"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-77" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$swmig</span>  </span>
<span id="cb46-78"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-78" tabindex="-1"></a>    eststo swmig_ols</span>
<span id="cb46-79"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-79" tabindex="-1"></a>    estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-80"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-80" tabindex="-1"></a>    estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-81"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-81" tabindex="-1"></a>    estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb46-82"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-82" tabindex="-1"></a>    estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb46-83"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-83" tabindex="-1"></a>    estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-84"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-84" tabindex="-1"></a>    estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb46-85"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-85" tabindex="-1"></a>    estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb46-86"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-86" tabindex="-1"></a>    estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span> </span>
<span id="cb46-87"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-87" tabindex="-1"></a></span>
<span id="cb46-88"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-88" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> ) <span class="ot">$swmig</span>  </span>
<span id="cb46-89"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-89" tabindex="-1"></a>    eststo swmig</span>
<span id="cb46-90"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-90" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat=<span class="ot">`fstat&#39;</span></span>
<span id="cb46-91"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-91" tabindex="-1"></a></span>
<span id="cb46-92"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-92" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$eurmig</span> </span>
<span id="cb46-93"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-93" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb46-94"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-94" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb46-95"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-95" tabindex="-1"></a></span>
<span id="cb46-96"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-96" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$eurmig</span>  </span>
<span id="cb46-97"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-97" tabindex="-1"></a>    eststo eurmig_ols</span>
<span id="cb46-98"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-98" tabindex="-1"></a>    estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-99"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-99" tabindex="-1"></a>    estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-100"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-100" tabindex="-1"></a>    estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb46-101"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-101" tabindex="-1"></a>    estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb46-102"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-102" tabindex="-1"></a>    estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb46-103"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-103" tabindex="-1"></a>    estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-104"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-104" tabindex="-1"></a>    estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;N&quot;</span> </span>
<span id="cb46-105"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-105" tabindex="-1"></a>    estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span> </span>
<span id="cb46-106"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-106" tabindex="-1"></a>    </span>
<span id="cb46-107"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-107" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> )  <span class="ot">$eurmig</span>  </span>
<span id="cb46-108"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-108" tabindex="-1"></a>    eststo eurmig</span>
<span id="cb46-109"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-109" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat=<span class="ot">`fstat&#39;</span></span>
<span id="cb46-110"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-110" tabindex="-1"></a></span>
<span id="cb46-111"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-111" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">$x_ols</span> <span class="ot">$x_iv</span> <span class="ot">$supmob</span> </span>
<span id="cb46-112"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-112" tabindex="-1"></a>    <span class="kw">test</span> <span class="ot">$x_iv</span> = 0</span>
<span id="cb46-113"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-113" tabindex="-1"></a>    <span class="kw">local</span> fstat=<span class="ot">`r(F)&#39;</span></span>
<span id="cb46-114"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-114" tabindex="-1"></a></span>
<span id="cb46-115"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-115" tabindex="-1"></a>    <span class="kw">reg</span> <span class="ot">`y&#39;</span> <span class="ot">$x_ols</span> <span class="ot">$supmob</span>  </span>
<span id="cb46-116"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-116" tabindex="-1"></a>    eststo supmob_ols</span>
<span id="cb46-117"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-117" tabindex="-1"></a>    estadd <span class="kw">local</span> hasdivfe       <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-118"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-118" tabindex="-1"></a>    estadd <span class="kw">local</span> hasbaseline    <span class="st">&quot;Y&quot;</span></span>
<span id="cb46-119"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-119" tabindex="-1"></a>    estadd <span class="kw">local</span> hasemp         <span class="st">&quot;N&quot;</span></span>
<span id="cb46-120"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-120" tabindex="-1"></a>    estadd <span class="kw">local</span> hasflexbpop40  <span class="st">&quot;N&quot;</span></span>
<span id="cb46-121"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-121" tabindex="-1"></a>    estadd <span class="kw">local</span> hasswmig       <span class="st">&quot;N&quot;</span></span>
<span id="cb46-122"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-122" tabindex="-1"></a>    estadd <span class="kw">local</span> haseurmig      <span class="st">&quot;N&quot;</span></span>
<span id="cb46-123"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-123" tabindex="-1"></a>    estadd <span class="kw">local</span> hassupmob      <span class="st">&quot;Y&quot;</span> </span>
<span id="cb46-124"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-124" tabindex="-1"></a>    estadd <span class="kw">local</span> precisionwt    <span class="st">&quot;Y&quot;</span> </span>
<span id="cb46-125"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-125" tabindex="-1"></a>    </span>
<span id="cb46-126"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-126" tabindex="-1"></a>    ivreg2 <span class="ot">`y&#39;</span> (<span class="ot">$x_ols</span> = <span class="ot">$x_iv</span> ) <span class="ot">$supmob</span>  </span>
<span id="cb46-127"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-127" tabindex="-1"></a>    eststo supmob</span>
<span id="cb46-128"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb46-128" tabindex="-1"></a>    estadd <span class="fu">scalar</span> fstat= <span class="ot">`fstat&#39;</span></span></code></pre></div>
<p>The process re-iterates while progressively adding new controls.
To compile the table and convert it to a <strong>LateX</strong> format, we use the following code:</p>
<div class="sourceCode" id="cb47" language="Stata" numbers="none"><pre class="sourceCode Stata"><code class="sourceCode stata"><span id="cb47-1"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-1" tabindex="-1"></a>    cd <span class="st">&quot;$figtab&quot;</span></span>
<span id="cb47-2"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-2" tabindex="-1"></a>    esttab nocon divfe baseline flexbpop40 supmob  swmig eurmig emp <span class="kw">using</span> <span class="st">&quot;main_robust_table_bmp25.tex&quot;</span>, frag <span class="kw">replace</span> varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb47-3"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-3" tabindex="-1"></a>    <span class="kw">stats</span>( fstat, labels(<span class="st">&quot;First Stage F-Stat&quot;</span>)) <span class="kw">keep</span>(<span class="ot">$x_ols</span>) coeflabel(GM <span class="st">&quot;GM (2SLS)&quot;</span>)  nonumber <span class="co">///</span></span>
<span id="cb47-4"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-4" tabindex="-1"></a>    nostar nomtitle <span class="kw">nonotes</span> nolines nogaps  substitute({<span class="kw">table</span>} {threeparttable}) prefoot(\cmidrule(lr){2-9})</span>
<span id="cb47-5"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-5" tabindex="-1"></a>    </span>
<span id="cb47-6"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-6" tabindex="-1"></a>    esttab nocon_ols divfe_ols baseline_ols flexbpop40_ols supmob_ols  swmig_ols eurmig_ols emp_ols  <span class="kw">using</span> <span class="st">&quot;main_robust_table_bmp25.tex&quot;</span>, frag <span class="kw">append</span>  varwidth(25) <span class="kw">label</span> se <span class="co">///</span></span>
<span id="cb47-7"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-7" tabindex="-1"></a>    prehead(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">&quot;</span>) coeflabel(GM <span class="st">&quot;GM (OLS)&quot;</span>) <span class="co">///</span></span>
<span id="cb47-8"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-8" tabindex="-1"></a>    <span class="kw">stats</span>( r2  <span class="kw">N</span>  precisionwt hasdivfe hasbaseline hasflexbpop40 hassupmob hasswmig haseurmig hasemp , <span class="co">///</span></span>
<span id="cb47-9"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-9" tabindex="-1"></a>    labels( <span class="st">&quot;R-squared (OLS)&quot;</span> <span class="kw">N</span> <span class="st">&quot;Precision Wt&quot;</span> <span class="st">&quot;Census Div FE&quot;</span> <span class="st">&quot;Baseline Controls&quot;</span>  <span class="st">&quot;1940 Black Share Quartile FEs&quot;</span> <span class="st">&quot;Southern Mob&quot;</span> <span class="co">///</span></span>
<span id="cb47-10"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-10" tabindex="-1"></a>    <span class="st">&quot;White South Mig&quot;</span> <span class="st">&quot;Eur Mig&quot;</span>  <span class="st">&quot;Emp Bartik&quot;</span> )) <span class="kw">keep</span>(<span class="ot">$x_ols</span>)  nonumber  <span class="co">///</span></span>
<span id="cb47-11"><a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#cb47-11" tabindex="-1"></a>    nostar nomtitle <span class="kw">nonotes</span> nolines prefoot(\cmidrule(lr){2-9}) postfoot(\cmidrule(lr){2-9})  substitute({<span class="kw">table</span>} {threeparttable}) </span></code></pre></div>
<p>We create two tables and append them. For both tables, the code ensures the same formatting as results tables. The first table displays results from the 2SLS regressions for different specifications, and showcases the coefficient of interest and the F-stat, labelled as GM(2SLS) using the command <code>coeflabel(GM "GM (2SLS)")</code>. The second table showcases and appends OLS regression results to the same LaTeX file using <code>append</code>. We include model specifications using <code>stats</code>. Compiled in a LateX reader, we get:</p>
<p><img src="resources/Resources_ED/Table%209.png" alt="Table 9" width="800px" /></p>
</div>
<div id="contribution" class="section level3 hasAnchor" number="2.2.9">
<h3><span class="header-section-number">2.2.9</span> Contribution<a href="can-you-move-to-opportunity-evidence-from-the-great-migration.html#contribution" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Throughout this document we explained these STATA tricks:</p>
<ul>
<li><p><strong>How to manage dynamic file creation and output</strong>, including generating files programmatically, organizing results, and saving them in a structured manner using <code>tempname</code>, <code>file open</code>, and <code>file write</code>.</p></li>
<li><p><strong>How to handle string matching</strong> with <code>regexm()</code> to manipulate and process string variables based on specific patterns.</p></li>
<li><p><strong>How to use macros and loops effectively</strong>, automating repetitive tasks with nested loops and running multiple regressions for different groups or variables using both local and global macros, and learning to identify the correct use for each.</p></li>
<li><p><strong>How to seamlessly export to LaTeX for Publication-Ready Tables</strong>, making it incredibly easy to present your regression outputs in publication-ready tables. Using <code>esttab</code> and <code>eststo</code>, we create formatted tables that are immediately ready for inclusion in <strong>LaTeX</strong> documents, eliminating the need for manual formatting.</p></li>
<li><p><strong>How to implement instrumental variable (IV) regressions using the ivreg2 package</strong>, understanding how to address endogeneity by using external instruments and analyzing first-stage results for instrument strength.</p></li>
</ul>
<hr />
<p><strong>Authors:</strong> Gaia Bechara, Evely Geroulakous, Oleksandra Povstiana, Fatemeh Razavi, Students in Master program in <code>Development Economics</code> (2024-2025), Sorbonne School of Economics, Université Paris 1 Panthéon Sorbonne.</p>
<p><strong>Date:</strong> December 2024</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="winners-and-losers-from-agrarian-reform-evidence-from-danish-land-inequality-16821895.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regression-discontinuity-design.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/SorbonneDevEcon/M2-Econometrics-Book/edit/main/03-Chapter3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/SorbonneDevEcon/M2-Econometrics-Book/blob/main/03-Chapter3.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
